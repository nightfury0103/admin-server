"use strict";(self.webpackChunkblockchain_wallet_v4_frontend=self.webpackChunkblockchain_wallet_v4_frontend||[]).push([[7535],{"./src/modals/Xlm/SendXlm/index.js":(e,t,n)=>{n.r(t),n.d(t,{default:()=>yt});var r=n("../../node_modules/react/index.js"),o=n("../../node_modules/react-redux/es/index.js"),a=n("../../node_modules/prop-types/index.js"),i=n.n(a),l=n("../../node_modules/redux/es/redux.js"),c=n("./src/data/index.ts"),s=n("./src/providers/ModalEnhancer/index.tsx"),u=n("../../node_modules/ramda/es/prop.js"),d=n("../../node_modules/ramda/es/propOr.js"),m=n("../../node_modules/ramda/es/lift.js"),p=n("../blockchain-wallet-v4/src/index.ts");const f=(0,n("../blockchain-wallet-v4/src/utils/index.ts").createDeepEqualSelector)([c.wl.wx.tF.getPayment,c.wl.wx.tF.getCheckDestination,c.wl.wx.tF.getIsDestinationExchange,c.wl.vE.aT.xlm.getTotalBalance,c.wl.vE.Nu.T1.getLockboxXlmAccounts,c.wl.vE.Xd.getCurrency,c.wl.vE.gU.isMnemonicVerified,c.wl.cr.getFormValues(c.o4.wx.tF.FORM),c.wl.cr.getActiveField(c.o4.wx.tF.FORM),c.wl.wx.tF.showNoAccountForm,function(e){return c.wl.vE.aT.coins.getRates("XLM",e)},c.wl.wx.tF.getSendLimits],(function(e,t,n,r,o,a,i,l,c,s,f,y){var x=(0,u.Z)("amount",l),g=(0,u.Z)("to",l),b=(0,u.Z)("from",l),v=n.getOrElse(!1),h=y.getOrElse({});return(0,m.Z)((function transform(e,n,o){var a=(0,d.Z)("0","effectiveBalance",e),l=(0,d.Z)("0","reserve",e),u=(0,d.Z)(!1,"destinationAccountExists",e),m=(0,d.Z)("0","fee",e),f=p.Nt.Success.is(t);return{activeField:c,amount:x,balanceStatus:r,currency:n,destination:g,destinationAccountExists:u,effectiveBalance:a,excludeLockbox:!1,fee:m,from:b,isDestinationChecked:f,isDestinationExchange:v,isMnemonicVerified:i,noAccount:s,rates:o,reserve:l,sendLimits:h}}))(e,a,f)}));var y,x=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),g=n("../blockchain-info-components/src/index.js");var b=x.ZP.div(y||(y=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n  box-sizing: border-box;\n"])));const template_error=function(e){return r.createElement(b,null,r.createElement(g.xv,{size:"12px",weight:400,color:"red600"},e.children))};var v,h=n("./src/services/styles/index.ts");var E=x.ZP.div(v||(v=function template_loading_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  width: 100%;\n  height: 460px;\n  box-sizing: border-box;\n"])));const template_loading=function(e){return r.createElement(E,null,r.createElement(g.co,{height:"20px",width:"30%"}),r.createElement(g.co,{height:"40px",width:"100%",style:(0,h.W0)("mt-15")}),r.createElement(g.co,{height:"20px",width:"30%",style:(0,h.W0)("mt-30")}),r.createElement(g.co,{height:"40px",width:"100%",style:(0,h.W0)("mt-15")}),r.createElement(g.co,{height:"20px",width:"30%",style:(0,h.W0)("mt-15")}),r.createElement(g.co,{height:"40px",width:"100%",style:(0,h.W0)("mt-15")}),r.createElement(g.co,{height:"80px",width:"100%",style:(0,h.W0)("mt-40")}))};var S=n("./node_modules/react-intl/lib/src/components/message.js"),_=n("../../node_modules/bowser/es5.js"),w=n.n(_),O=n("../../node_modules/ramda/es/isEmpty.js"),P=n("../../node_modules/redux-form/es/Field.js"),j=n("../../node_modules/redux-form/es/reduxForm.js"),C=n("./src/components/Display/ComboDisplay/index.js"),M=n("./src/components/Flyout/Banners/UpgradeToGold.tsx"),T=n("./src/components/Form/index.ts"),Z=n("./src/components/QRCode/Capture/index.js"),X=n("./src/components/Send/index.tsx"),L=n("./src/components/Send/RecoveryPhrase/index.tsx"),F=n("./src/components/UnstoppableDomains/index.tsx"),A=n("./src/services/forms/index.js"),z=n("./src/modals/Settings/TradingLimits/model.ts"),k=n("./node_modules/bignumber.js/bignumber.js"),R=n.n(k),B=n("../../node_modules/ramda/es/mapObjIndexed.js"),D=n("../../node_modules/ramda/es/path.js"),N=n("../../node_modules/stellar-sdk/lib/index.js"),I=n("../blockchain-wallet-v4/src/exchange/currencies/index.ts"),q=n("../blockchain-wallet-v4/src/exchange/utils.ts"),U=n("./src/modals/components/index.tsx");const W=(0,o.connect)((function getData(e,t){var n=(0,u.Z)("fee",t),r=p.ei.convertCoinToCoin({coin:"XLM",value:n}),o=(0,u.Z)("effectiveBalanceXlm",t);return{effectiveBalance:new(R())(o).minus(r).toString()}}),(function mapDispatchToProps(e){return{actions:(0,l.bindActionCreators)(c.Nw.wx.sendXlm,e)}}))((function MaximumAmountLink(e){return r.createElement(g.rU,{"data-e2e":"xlmMaximumAmountLink",size:"12px",weight:400,onClick:e.actions.firstStepMaximumAmountClicked},"".concat(e.effectiveBalance," XLM"))}));var J;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=(0,x.ZP)(g.JO)(J||(J=function ModalIcon_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  margin-top: 4px;\n  margin-left: 24px;\n  cursor: pointer;\n  font-size: 20px;\n  color: ",";\n"])),(function(e){return e.theme["brand-secondary"]}));const G=(0,o.connect)(null,(function mapDispatchToProps(e,t){return{showModal:e.bind(null,c.Nw.qk.showModal(t.modal,_objectSpread({},t)))}}))((function ModalIconContainer(e){var t=e.className,n=e.showModal;return r.createElement(V,{onMouseDown:n,name:"arrow-right",className:t,"data-e2e":"sendXlmRightArrow"})}));var K;function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}var Y,Q=c.o4.wx.tF,H=Q.CREATE_ACCOUNT_LEARN_MODAL,$=Q.RESERVE_LEARN_MODAL,ee=(0,x.ZP)(g.jL)(K||(K=function validationMessages_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  > span {\n    display: none;\n  }\n  > div {\n    text-transform: none;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n  }\n  margin-bottom: 16px;\n"]))),te=function InvalidAmountMessage(){return r.createElement("div",{"data-e2e":"sendXlmInvalidAmount"},r.createElement(S.Z,{id:"modals.sendxlm.amountnotzeromessage",defaultMessage:"Invalid amount"}))},ne=function ShouldCreateAccountMessage(e){return r.createElement(ee,{type:"warning","data-e2e":"sendXlmErrorSendAtLeast"},r.createElement(S.Z,{id:"modals.sendxlm.shouldcreateaccountmessage",defaultMessage:"You need to send at least {reserveXlm} XLM to this address",values:e}),r.createElement(G,_extends({modal:H},e)))},re=function NoFundsMessage(e){return r.createElement(ee,{type:"warning"},r.createElement(S.Z,{id:"modals.sendxlm.nofunds",defaultMessage:"Your account is at the minimum balance"}),r.createElement(G,_extends({modal:$},e)))},oe=function ReserveMessage(e){return r.createElement(ee,{type:"warning","data-e2e":"sendXlmUseTotalBalance"},r.createElement("div",null,r.createElement(S.Z,{id:"modals.sendxlm.usespendable",defaultMessage:"Use total spendable balance"}),": ",r.createElement(W,e),r.createElement("br",null),r.createElement(S.Z,{id:"modals.sendxlm.learnmore",defaultMessage:"Learn about Stellarâ€™s minimum balance requirement."})),r.createElement(G,_extends({modal:$},e)))},ae=function InsufficientFundsMessage(){return r.createElement(S.Z,{id:"modals.sendxlm.insufficientfundsmessage",defaultMessage:"Insufficient funds"})},ie=function WrongIdMemoFormat(){return r.createElement("div",{"data-e2e":"sendXlmWrongIdMemoFormat"},r.createElement(S.Z,{id:"modals.sendxlm.wrongidmemo",defaultMessage:"Memo should be a number"}))},le=function WrongTextMemoFormat(){return r.createElement("div",{"data-e2e":"sendXlmWrongTextMemoFormat"},r.createElement(S.Z,{id:"modals.sendxlm.wrongtextmemo",defaultMessage:"Memo should be shorter than 28 symbols"}))},ce=(0,B.Z)((function(e,t){return e.units[t].symbol}),I.Z),se="Not enough funds to create new account",ue="Wallet amount at base reserve",de="Remaining amount below base reserve",me=function insufficientFunds(e,t,n){return n.effectiveBalance>0?void 0:r.createElement(ae,null)},pe=function invalidAmount(e,t,n){var o=(0,u.Z)("coin",e);return p.ei.convertCoinToCoin({baseToStandard:!1,coin:"XLM",value:o})>0?void 0:r.createElement(te,null)},fe=function validateMemo(e,t){var n=(0,u.Z)("memoType",t);if(e)try{N.Memo[n](e)}catch(e){return"error"}},ye=function validateMemoType(e,t){var n=(0,u.Z)("memo",t);if(n)try{N.Memo[e](n)}catch(t){if("text"===e)return r.createElement(le,null);if("id"===e)return r.createElement(ie,null)}},xe=function isSendLimitOver(e,t,n){var o,a,i,l=n.from,c=n.sendLimits,s=(0,u.Z)("fiat",e);if(l&&"CUSTODIAL"===l.type&&!(0,O.Z)(c)&&null!=c&&null!==(o=c.current)&&void 0!==o&&null!==(a=o.available)&&void 0!==a&&a.currency){var d=null==c||null===(i=c.current)||void 0===i?void 0:i.available,m=d.currency,p=d.value;return s>Number(p)?r.createElement(U.ty,{amount:(0,q.M)(p),currency:I.Z[m].units[m].symbol}):void 0}},ge=function ErrorBanner(e){var t=e.error;return t.message===ue?r.createElement(re,t):t.message===se?r.createElement(ne,t):t.message===de?r.createElement(oe,t):void 0};function InfoBanner_extends(){return InfoBanner_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},InfoBanner_extends.apply(this,arguments)}var be=(0,B.Z)((function(e,t){return e.units[t].symbol}),I.Z),ve=c.o4.wx.tF.RESERVE_LEARN_MODAL,he=(0,x.ZP)(g.jL)(Y||(Y=function InfoBanner_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  > div {\n    width: 100%;\n    align-items: center;\n  }\n  margin-bottom: 16px;\n"]))),Ee=function InfoBanner(e){var t=(0,u.Z)("effectiveBalance",e),n=(0,u.Z)("reserve",e),o=(0,u.Z)("fee",e),a=p.ei.convertCoinToCoin({coin:"XLM",value:n}),i=(0,u.Z)("currency",e),l=(0,u.Z)("rates",e),c=p.ei.convertCoinToFiat({coin:"XLM",currency:i,rates:l,value:new k.BigNumber.sum(t,o)}),s={currency:i,effectiveBalanceXlm:p.ei.convertCoinToCoin({coin:"XLM",value:new k.BigNumber.sum(t,o)}),fee:o,rates:l,reserveXlm:a};return r.createElement(he,{"data-e2e":"sendXlmBalanceBanner"},r.createElement(S.Z,{id:"modals.sendxlm.reserveinfo",defaultMessage:"Your available balance is {currencySymbol}{effectiveBalanceFiat} (minus fee). Learn about Stellarâ€™s minimum balance.",values:{currencySymbol:be[i],effectiveBalanceFiat:c}}),r.createElement(G,InfoBanner_extends({modal:ve},s)))},Se=c.o4.wx.tF.CREATE_ACCOUNT_LEARN_MODAL,_e=function NoAccountTemplate(e){var t=e.swapActions;return r.createElement(r.Fragment,null,r.createElement(T.cw,null,r.createElement(g.jL,{type:"info","data-e2e":"sendXlmNoAccount"},r.createElement(g.xv,{color:"warning",size:"12px"},r.createElement(S.Z,{id:"modals.sendxlm.firststep.noaccount",defaultMessage:"Minimum of 1 XLM needed for new accounts. Learn about Stellarâ€™s minimum balance requirement."})),r.createElement(G,{modal:Se}))),r.createElement(T.cw,null,r.createElement(g.zx,{type:"submit",nature:"primary",uppercase:!0,fullwidth:!0,onClick:function onClick(){return t.showModal("Send")}},r.createElement(S.Z,{id:"modals.sendxlm.firststep.swap",defaultMessage:"Swap for XLM"}))))};function SelectBoxMemo_extends(){return SelectBoxMemo_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SelectBoxMemo_extends.apply(this,arguments)}var we=[{group:"",items:[{text:"Id",value:"id"},{text:"Text",value:"text"}]}],Oe=function SelectBoxMemo(e){return r.createElement(T.jL,SelectBoxMemo_extends({elements:we},e))},Pe=["error","meta"];function XlmFiatConverter_extends(){return XlmFiatConverter_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XlmFiatConverter_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var je,Ce,Me,Te=function XlmFiatConverter(e){var t=e.error,n=e.meta,o=_objectWithoutProperties(e,Pe);return t&&(n.invalid=!0),r.createElement(T.g8,XlmFiatConverter_extends({meta:n},o))};function template_success_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ze=(0,x.ZP)(T.cw)(je||(je=template_success_taggedTemplateLiteral(["\n  margin-top: 16px;\n"]))),Xe=(0,x.ZP)(g.jL)(Ce||(Ce=template_success_taggedTemplateLiteral(["\n  margin: 8px 0;\n  padding: 8px;\n"]))),Le=x.ZP.div(Me||(Me=template_success_taggedTemplateLiteral(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  & > :first-child {\n    flex: 2;\n    input {\n      border-right: none;\n    }\n  }\n  & > :last-child {\n    flex: 1;\n    label {\n      width: 300%;\n    }\n  }\n"]))),Fe=function FirstStep(e){var t,n,o=e.activeField,a=(e.amount,e.balanceStatus),i=e.error,l=e.excludeLockbox,s=e.fee,u=e.from,d=e.handleSubmit,m=e.invalid,f=e.isDestinationChecked,y=e.isDestinationExchange,x=e.isMnemonicVerified,b=e.noAccount,v=e.pristine,h=e.sendLimits,E=e.submit,_=e.submitting,j=e.swapActions,k=e.verifyIdentity,R="amount"===o,B=u&&"LOCKBOX"===u.type,D=u&&"CUSTODIAL"===u.type,N=w().getParser(window.navigator.userAgent).satisfies(c.o4.wx.T1.C),I=B&&!N,q=D&&!x;return r.createElement(T.l0,{onSubmit:d},r.createElement(T.cw,{inline:!0,margin:"15px",style:{zIndex:3}},r.createElement(T.xJ,{width:"40%"},r.createElement(T.lX,{htmlFor:"coin"},r.createElement(S.Z,{id:"modals.sendxlm.firststep.currency",defaultMessage:"Currency"})),r.createElement(P.Z,{name:"coin",component:T.bX,type:"send",validate:[A.C1]})),r.createElement(T.xJ,{width:"60%"},r.createElement(T.lX,{htmlFor:"from"},r.createElement(S.Z,{id:"copy.from",defaultMessage:"From"})),r.createElement(P.Z,{name:"from",component:T.dc,includeAll:!1,validate:[A.C1],excludeLockbox:l,includeCustodial:!0}))),b&&r.createElement(_e,{swapActions:j}),!b&&r.createElement(r.Fragment,null,B&&!I&&r.createElement(Xe,{type:"info"},r.createElement(g.xv,{color:"warning",size:"13px"},r.createElement(S.Z,{id:"modals.sendxlm.firststep.lockboxwarn",defaultMessage:"You will need to connect your Lockbox to complete this transaction."}))),I&&r.createElement(Xe,{type:"warning"},r.createElement(g.xv,{color:"warning",size:"12px"},r.createElement(S.Z,{id:"modals.sendxlm.firststep.blockbrowser",defaultMessage:"Sending Stellar from Lockbox can only be done while using the Brave, Chrome, Firefox or Opera browsers."}))),r.createElement(T.cw,null,r.createElement(X.ky,{account:u})),r.createElement(T.cw,{margin:D?"15px":"8px"},r.createElement(T.xJ,null,r.createElement(T.lX,{htmlFor:"to"},r.createElement(S.Z,{id:"modals.sendxlm.firststep.sendto",defaultMessage:"To"})),r.createElement(X.X2,null,r.createElement(P.Z,{component:T.dc,dataE2e:"sendXlmAddressInput",exclude:u?[u.label]:[],includeAll:!1,includeExchangeAddress:!0,isCreatable:!0,isValidNewOption:function isValidNewOption(){return!1},name:"to",noOptionsMessage:function noOptionsMessage(){return null},includeCustodial:!D,forceCustodialFirst:!0,placeholder:"Paste, scan, or select destination",validate:[A.C1,A.OS]}),!D&&r.createElement(Z.Z,{scanType:"xlmAddress",border:["top","bottom","right","left"]})))),r.createElement(F.Z,{form:c.o4.wx.tF.FORM}),r.createElement(T.cw,{margin:"15px"},r.createElement(T.xJ,null,r.createElement(T.lX,{htmlFor:"amount"},r.createElement(S.Z,{id:"modals.sendxlm.firststep.sendamountto",defaultMessage:"Amount"})),r.createElement(P.Z,{name:"amount",component:Te,error:i,coin:"XLM",validate:[A.C1,pe,me,xe],"data-e2e":"sendXlm",marginTop:"8px"}))),R&&!i&&!D&&r.createElement(Ee,e),i&&!D&&r.createElement(ge,{error:i}),r.createElement(T.cw,{margin:"15px"},r.createElement(T.xJ,null,r.createElement(T.lX,{htmlFor:"memo"},r.createElement(S.Z,{id:"modals.sendxlm.firststep.txmemo",defaultMessage:"Memo"}),r.createElement(g.G0,{id:"sendxlm.firststep.memotooltip"},r.createElement(g.nw,{name:"info",size:"12px"}))),r.createElement(Le,null,r.createElement(P.Z,{name:"memo",errorBottom:!0,validate:fe,component:T.zC,placeholder:"Enter text or ID for recipient (optional)","data-e2e":"sendXlmMemoText",noLastPass:!0}),r.createElement(P.Z,{name:"memoType",errorBottom:!0,validate:ye,component:Oe,"data-e2e":"sendXlmMemoType"}))),y&&r.createElement(Xe,{type:"warning","data-e2e":"sendXlmToExchangeAddress"},r.createElement(g.xv,{color:"warning",size:"12px"},r.createElement(S.Z,{id:"modals.sendxlm.firststep.sendtoexchange2",defaultMessage:"Sending XLM to an exchange often requires adding a memo. Failing to include a required memo may result in a loss of funds!"}),r.createElement(g.rU,{href:"/support/hc/en-us/articles/360018797312-Stellar-memos",target:"_blank",size:"11px",weight:700,altFont:!0,color:"red600"},r.createElement(S.Z,{id:"buttons.learn_more",defaultMessage:"Learn More"}))))),r.createElement(T.cw,{margin:"15px"},r.createElement(T.xJ,null,r.createElement(T.lX,{htmlFor:"description"},r.createElement(S.Z,{id:"modals.sendxlm.firststep.desc",defaultMessage:"Description"}),r.createElement(g.G0,{id:"sendxlm.firststep.sharetooltip"},r.createElement(g.nw,{name:"info",size:"12px"}))),r.createElement(P.Z,{name:"description",disabled:D,component:T.or,placeholder:"What's this transaction for? (optional)","data-e2e":"sendXlmDescription",fullwidth:!0,maxLength:100}))),r.createElement(T.cw,{inline:!0,margin:"10px"},r.createElement(T.xJ,null,r.createElement(g.xv,{size:"16px",weight:500},r.createElement(S.Z,{id:"modals.sendxlm.firststep.fee",defaultMessage:"Transaction Fee:"})),r.createElement(g.xv,null,r.createElement(C.Z,{size:"13px",coin:"XLM",weight:500},s)))),D&&!x?r.createElement(L.Z,null):null,D&&!(0,O.Z)(h)&&(null==h||null===(t=h.globalLimit)||void 0===t||null===(n=t.suggestedUpgrade)||void 0===n?void 0:n.requiredTier)===z.iY.GOLD?r.createElement(M.Z,{limits:h,verifyIdentity:k}):null,r.createElement(Ze,null,r.createElement(g.zx,{height:"56px",size:"18px",onMouseDown:E,nature:"primary",disabled:v||_||m||I||q||!f||p.Nt.Loading.is(a),"data-e2e":"xlmSendContinue"},r.createElement(S.Z,{id:"buttons.continue",defaultMessage:"Continue"})))))};Fe.propTypes={effectiveBalance:i().string.isRequired,fee:i().string.isRequired,handleSubmit:i().func.isRequired,handleToToggle:i().func.isRequired,invalid:i().bool.isRequired,submitting:i().bool.isRequired,toToggled:i().bool.isRequired};const Ae=(0,j.Z)({destroyOnUnmount:!1,form:c.o4.wx.tF.FORM,shouldError:function shouldError(e){var t=e.initialRender,n=e.nextProps,r=e.props,o=e.structure,a=e.values;return!!t||(t||!o.deepEqual(a,n.values)||r.effectiveBalance!==n.effectiveBalance)},shouldWarn:function shouldWarn(e){var t=e.initialRender,n=e.nextProps,r=e.props,o=e.structure,a=e.values;return!!t||(t||!o.deepEqual(a,n.values)||r.effectiveBalance!==n.effectiveBalance)},validate:function validate(e,t){try{var n={};return function accountCreationAmount(e,t,n){var r=(0,D.Z)(["amount","coin"],t),o=(0,u.Z)("reserve",n);if(!r||!o)return e;var a=p.ei.convertCoinToCoin({coin:"XLM",value:o});!(0,u.Z)("destinationAccountExists",n)&&new k.BigNumber(r).isLessThan(a)&&(e._error={message:se,reserveXlm:a})}(n,e,t),function balanceReserveAmount(e,t,n){var r=(0,D.Z)(["amount","coin"],t),o=p.ei.convertCoinToCoin({baseToStandard:!1,coin:"XLM",value:r}),a=(0,u.Z)("effectiveBalance",n),i=(0,u.Z)("reserve",n),l=(0,u.Z)("fee",n),c=p.ei.convertCoinToCoin({coin:"XLM",value:i}),s=p.ei.convertCoinToCoin({coin:"XLM",value:new k.BigNumber.sum(a,l)}),d=(0,u.Z)("currency",n),m=(0,u.Z)("rates",n),f=p.ei.convertCoinToFiat({coin:"XLM",currency:d,effectiveBalanceXlm:s,isStandard:!0,rates:m});a<0?e._error={currency:d,currencySymbol:ce[d],effectiveBalanceFiat:f,effectiveBalanceXlm:s,fee:l,message:ue,rates:m,reserveXlm:c}:p.P6.xlm.overflowsEffectiveBalance(o,a)&&(e._error={currency:d,currencySymbol:ce[d],effectiveBalanceFiat:f,effectiveBalanceXlm:s,fee:l,message:de,rates:m,reserveXlm:c})}(n,e,t),n}catch(e){}}})(Fe);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function FirstStep_extends(){return FirstStep_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FirstStep_extends.apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}var ze=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FirstStep,e);var t=_createSuper(FirstStep);function FirstStep(){return _classCallCheck(this,FirstStep),t.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(FirstStep,[{key:"render",value:function render(){var e=this,t=this.props,n=t.actions;return t.data.cata({Failure:function Failure(e){return r.createElement(template_error,null,e)},Loading:function Loading(){return r.createElement(template_loading,null)},NotAsked:function NotAsked(){return r.createElement(template_loading,null)},Success:function Success(t){return r.createElement(Ae,FirstStep_extends({},t,e.props,{onSubmit:n.firstStepSubmitClicked}))}})}}]),FirstStep}(r.PureComponent);const ke=(0,o.connect)((function mapStateToProps(e){return{data:f(e)}}),(function mapDispatchToProps(e){return{actions:(0,l.bindActionCreators)(c.Nw.wx.sendXlm,e),formActions:(0,l.bindActionCreators)(c.Nw.cr,e),swapActions:(0,l.bindActionCreators)(c.Nw.wx.swap,e),verifyIdentity:function verifyIdentity(){return e(c.Nw.wx.identityVerification.verifyIdentity({needMoreInfo:!1,origin:"Send",tier:2}))}}}))(ze);var Re,Be=n("../../node_modules/ramda/es/curry.js"),De=n("../blockchain-wallet-v4/src/redux/payment/btc/utils.ts"),Ne=c.wl.cr.isSubmitting(c.o4.wx.tF.FORM),Ie=(0,Be.Z)((function(e,t){var n=e.from;switch(n.type){case De._t.ACCOUNT:return c.wl.vE.Nu.F2.getAccountLabel(t,n.address).getOrElse(n.address);case De._t.CUSTODIAL:return n.address;case De._t.LOCKBOX:return c.wl.vE.Nu.T1.getLockboxXlmAccount(t,n.address).map((0,u.Z)("label")).getOrElse(n.address);default:return n.address}})),qe=function getData(e){return c.wl.wx.tF.getPayment(e).map((function transform(t){var n=Ie(t,e),r=t.to.label||t.to.address;return{amount:t.amount,description:t.description,fee:t.fee,fromAddress:n,memo:t.memo,memoType:t.memoType,submitting:Ne(e),toAddress:r,total:p.P6.xlm.calculateTransactionAmount(t.amount,t.fee)}}))};var Ue=x.ZP.div(Re||(Re=function template_error_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n  box-sizing: border-box;\n"])));const SecondStep_template_error=function(e){return r.createElement(Ue,null,r.createElement(g.xv,{size:"12px",weight:400,color:"red600"},e.children))};var We;var Je=x.ZP.div(We||(We=function SecondStep_template_loading_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  width: 100%;\n  height: 460px;\n  box-sizing: border-box;\n"])));const SecondStep_template_loading=function(e){return r.createElement(Je,null,r.createElement(g.co,{height:"20px",width:"30%"}),r.createElement(g.co,{height:"40px",width:"100%",style:{marginTop:"15px"}}),r.createElement(g.co,{height:"20px",width:"30%",style:{marginTop:"30px"}}),r.createElement(g.co,{height:"40px",width:"100%",style:{marginTop:"15px"}}),r.createElement(g.co,{height:"20px",width:"30%",style:{marginTop:"15px"}}),r.createElement(g.co,{height:"40px",width:"100%",style:{marginTop:"15px"}}),r.createElement(g.co,{height:"80px",width:"100%",style:{marginTop:"40px"}}))};var Ve,Ge,Ke,Ye,Qe,He=n("./src/components/Display/CoinDisplay/index.tsx"),$e=n("./src/components/Display/FiatDisplay/index.tsx"),et=n("./src/components/Exchange/index.tsx");function SecondStep_template_success_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var tt=(0,x.ZP)(et.im)(Ve||(Ve=SecondStep_template_success_taggedTemplateLiteral(["\n  padding: 0px;\n"]))),nt=(0,x.ZP)(et.bp)(Ge||(Ge=SecondStep_template_success_taggedTemplateLiteral(["\n  justify-content: flex-end;\n"]))),rt=(0,x.ZP)(et.lb)(Ke||(Ke=SecondStep_template_success_taggedTemplateLiteral(["\n  justify-content: flex-end;\n"]))),ot=(0,x.ZP)(g.xv)(Ye||(Ye=SecondStep_template_success_taggedTemplateLiteral(["\n  max-width: 60%;\n  text-align: right;\n  word-break: break-all;\n"]))),at=x.ZP.div(Qe||(Qe=SecondStep_template_success_taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  margin-top: 16px;\n  width: 100%;\n\n  & > :first-child {\n    margin-bottom: 15px;\n  }\n"])));const it=function Success(e){var t=e.amount,n=e.coin,o=e.description,a=e.fee,i=e.fromAddress,l=e.handleBack,c=e.handleSubmit,s=e.memo,u=e.memoType,d=e.submitting,m=e.toAddress,p=e.total;return r.createElement(r.Fragment,null,r.createElement(tt,null,r.createElement(et.xy,null,r.createElement(g.xv,{size:"16px",weight:500},r.createElement(S.Z,{id:"copy.from",defaultMessage:"From"}),":"),r.createElement(g.xv,{size:"16px",weight:400,"data-e2e":"xlmFromWallet"},i)),r.createElement(et.xy,null,r.createElement(g.xv,{size:"16px",weight:500},r.createElement(S.Z,{id:"modals.sendxlm.secondstep.to",defaultMessage:"To:"})),r.createElement(ot,{size:"16px",weight:400,"data-e2e":"xlmToAddress"},m)),o&&r.createElement(et.xy,null,r.createElement(g.xv,{size:"16px",weight:500},r.createElement(S.Z,{id:"modals.sendxlm.secondstep.note",defaultMessage:"Note:"})),r.createElement(g.xv,{size:"16px",weight:400,"data-e2e":"xlmSendDescription"},o)),s&&r.createElement(et.xy,null,r.createElement(g.xv,{size:"16px",weight:500,"data-e2e":"xlmSendMemo"},r.createElement(S.Z,{id:"modals.sendxlm.secondstep.memo",defaultMessage:"Memo"})),r.createElement(g.xv,{size:"16px",weight:400}," ".concat(u,": ").concat(s))),r.createElement(et.xy,null,r.createElement(g.xv,{size:"16px",weight:500},r.createElement(S.Z,{id:"modals.sendxlm.secondstep.amount",defaultMessage:"Amount:"})),r.createElement(et.UO,null,r.createElement(nt,null,r.createElement($e.Z,{size:"16px",weight:500,coin:n},t)),r.createElement(rt,null,r.createElement(He.Z,{size:"14px",weight:300,coin:n},t)))),r.createElement(et.xy,null,r.createElement(g.xv,{size:"16px",weight:500},r.createElement(S.Z,{id:"modals.sendxlm.secondstep.fee",defaultMessage:"Fee:"})),r.createElement(et.UO,null,r.createElement(nt,null,r.createElement($e.Z,{size:"16px",weight:500,coin:n},a)),r.createElement(rt,null,r.createElement(He.Z,{size:"14px",weight:300,coin:n},a)))),r.createElement(et.xy,null,r.createElement(g.xv,{size:"16px",weight:400},r.createElement(S.Z,{id:"modals.sendxlm.secondstep.sendtotal",defaultMessage:"Total:"})),r.createElement(et.UO,null,r.createElement(nt,{"data-e2e":"".concat(n,"SendTotal")},r.createElement($e.Z,{coin:n,size:"16px",weight:500},p)),r.createElement(rt,{"data-e2e":"".concat(n,"SendSubTotal")},r.createElement(He.Z,{coin:n,size:"14px",weight:300},p))))),r.createElement(at,null,r.createElement(g.zx,{height:"56px",size:"18px",onClick:c,disabled:d,nature:"primary",fullwidth:!0,"data-e2e":"xlmSendSubmitButton"},d?r.createElement(g.JA,{height:"20px",width:"20px",color:"white"}):r.createElement(S.Z,{id:"modals.sendxlm.secondstep.send",defaultMessage:"Send Stellar"})),r.createElement(g.rU,{onClick:!d&&l,disabled:d,size:"13px",weight:400,"data-e2e":"xlmSendBackLink"},r.createElement(S.Z,{id:"buttons.go_back",defaultMessage:"Go Back"}))))};function SecondStep_typeof(e){return SecondStep_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SecondStep_typeof(e)}function SecondStep_extends(){return SecondStep_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SecondStep_extends.apply(this,arguments)}function SecondStep_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SecondStep_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SecondStep_setPrototypeOf(e,t){return SecondStep_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},SecondStep_setPrototypeOf(e,t)}function SecondStep_createSuper(e){var t=function SecondStep_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=SecondStep_getPrototypeOf(e);if(t){var o=SecondStep_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return SecondStep_possibleConstructorReturn(this,n)}}function SecondStep_possibleConstructorReturn(e,t){if(t&&("object"===SecondStep_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return SecondStep_assertThisInitialized(e)}function SecondStep_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SecondStep_getPrototypeOf(e){return SecondStep_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},SecondStep_getPrototypeOf(e)}function SecondStep_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lt=function(e){!function SecondStep_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SecondStep_setPrototypeOf(e,t)}(SecondStepContainer,e);var t=SecondStep_createSuper(SecondStepContainer);function SecondStepContainer(){var e;SecondStep_classCallCheck(this,SecondStepContainer);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return SecondStep_defineProperty(SecondStep_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"onGoBack",(function(){e.props.actions.secondStepCancelClicked()})),e}return function SecondStep_createClass(e,t,n){return t&&SecondStep_defineProperties(e.prototype,t),n&&SecondStep_defineProperties(e,n),e}(SecondStepContainer,[{key:"render",value:function render(){var e=this,t=this.props,n=t.actions;return t.data.cata({Failure:function Failure(e){return r.createElement(SecondStep_template_error,null,e)},Loading:function Loading(){return r.createElement(SecondStep_template_loading,null)},NotAsked:function NotAsked(){return r.createElement(SecondStep_template_loading,null)},Success:function Success(t){return r.createElement(it,SecondStep_extends({coin:"XLM"},t,{handleBack:e.onGoBack,handleSubmit:n.secondStepSubmitClicked}))}})}}]),SecondStepContainer}(r.PureComponent);const ct=(0,o.connect)((function mapStateToProps(e){return{data:qe(e)}}),(function mapDispatchToProps(e){return{actions:(0,l.bindActionCreators)(c.Nw.wx.sendXlm,e)}}))(lt);var st,ut=n("./src/components/Announcements/index.js");var dt=(0,x.ZP)(g.xB)(st||(st=function template_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  border-bottom: 0;\n  padding-bottom: 8px;\n  > div:first-child * {\n    color: ",";\n  }\n"])),(function(e){return e.theme.blue900})),mt=function SendXlm(e){return r.createElement(g.u_,{size:"medium",position:e.position,total:e.total},r.createElement(dt,{icon:"send",onClose:e.closeAll},r.createElement(S.Z,{id:"modals.sendxlm.title",defaultMessage:"Send Stellar"})),r.createElement(ut.Z,{type:"service",alertArea:"send",currentCoin:"XLM"}),r.createElement(g.fe,null,e.children))};mt.propTypes={closeAll:i().func.isRequired,position:i().number.isRequired,total:i().number.isRequired};const pt=mt;function SendXlm_typeof(e){return SendXlm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SendXlm_typeof(e)}function SendXlm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SendXlm_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SendXlm_setPrototypeOf(e,t){return SendXlm_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},SendXlm_setPrototypeOf(e,t)}function SendXlm_createSuper(e){var t=function SendXlm_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=SendXlm_getPrototypeOf(e);if(t){var o=SendXlm_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return SendXlm_possibleConstructorReturn(this,n)}}function SendXlm_possibleConstructorReturn(e,t){if(t&&("object"===SendXlm_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function SendXlm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function SendXlm_getPrototypeOf(e){return SendXlm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},SendXlm_getPrototypeOf(e)}var ft=function(e){!function SendXlm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SendXlm_setPrototypeOf(e,t)}(SendXlmContainer,e);var t=SendXlm_createSuper(SendXlmContainer);function SendXlmContainer(){return SendXlm_classCallCheck(this,SendXlmContainer),t.apply(this,arguments)}return function SendXlm_createClass(e,t,n){return t&&SendXlm_defineProperties(e.prototype,t),n&&SendXlm_defineProperties(e,n),e}(SendXlmContainer,[{key:"componentDidMount",value:function componentDidMount(){var e=this.props,t=e.amount,n=e.memo,r=e.to;this.props.actions.initialized({amount:t,memo:n,to:r})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.actions.destroyed()}},{key:"render",value:function render(){var e=this.props,t=e.closeAll,n=e.position,o=e.step,a=e.total;return r.createElement(pt,{position:n,total:a,closeAll:t},1===o&&r.createElement(ke,null),2===o&&r.createElement(ct,null))}}]),SendXlmContainer}(r.PureComponent);ft.propTypes={closeAll:i().func.isRequired,position:i().number.isRequired,step:i().number.isRequired,total:i().number.isRequired};const yt=(0,l.compose)((0,s.Z)("SEND_XLM_MODAL"),(0,o.connect)((function mapStateToProps(e){return{step:c.wl.wx.tF.getStep(e)}}),(function mapDispatchToProps(e){return{actions:(0,l.bindActionCreators)(c.Nw.wx.sendXlm,e),fetchData:(0,l.bindActionCreators)(c.Nw.vE.aT.xlm.fetchData,e)}})))(ft)}}]);