"use strict";(self.webpackChunkblockchain_wallet_v4_frontend=self.webpackChunkblockchain_wallet_v4_frontend||[]).push([[7842],{"./src/modals/InterestUploadDocuments/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var n=s("../../node_modules/react/index.js"),o=s("../../node_modules/react-redux/es/index.js"),l=s("../../node_modules/redux/es/redux.js"),a=s("./src/components/Flyout/index.tsx"),c=s("./src/data/index.ts"),r=s("./src/data/types.ts"),i=s("./src/providers/ModalEnhancer/index.tsx");const{INTEREST_UPLOAD_DOCUMENT:u}=c.o4.wx.oP,d=(0,o.connect)((e=>({formValues:c.wl.cr.getFormValues(u)(e)})))((({close:e,countryCode:t,formValues:s,handleSubmit:o,interestUploadDocumentActions:l,userData:c})=>{var i;const u=(0,n.useCallback)((()=>l.setStep({step:r.Oq.GET_STARTED})),[r.Oq.GET_STARTED]),d={close:e,countryCode:(null===(i=null==c?void 0:c.address)||void 0===i?void 0:i.country)||t,formValues:s,handleSubmit:o,nextStep:u};return n.createElement(a.r0,Object.assign({},d))})),{INTEREST_UPLOAD_DOCUMENT:m}=c.o4.wx.oP,p=(0,o.connect)((e=>({formValues:c.wl.cr.getFormValues(m)(e)})))((({interestUploadDocumentActions:e})=>{const t={nextStep:(0,n.useCallback)((()=>e.setStep({step:r.Oq.UPLOAD_AND_VERIFIED})),[r.Oq.UPLOAD_AND_VERIFIED]),previousStep:(0,n.useCallback)((()=>e.setStep({step:r.Oq.INIT_PAGE})),[r.Oq.INIT_PAGE])};return n.createElement(a.Ff,Object.assign({},t))}));var D=s("../../node_modules/ramda/es/lift.js");const getData=e=>{const t=c.wl.wx.oP.getInterestEDDDocumentLimits(e),s=c.wl.vE.Xd.getCountryCode(e).getOrElse(null),n=c.wl.qz.N5.getUserData(e),o=c.wl.wx.oP.getStep(e);return(0,D.Z)(((e,t)=>({countryCode:s,documentLimits:e,step:o,userData:t})))(t,n)};var E=s("./node_modules/react-intl/lib/src/components/message.js"),h=s("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),O=s("../blockchain-info-components/src/index.js");const _=h.ZP.div`
  width: 100%;
  height: 100%;
  align-items: center;
  justify-content: center;
  display: flex;
  flex-direction: column;
`,template_loading=()=>n.createElement(_,null,n.createElement(O.nZ,null),n.createElement(O.xv,{weight:600,color:"grey600",style:{marginTop:"24px"}},n.createElement(E.Z,{id:"modals.interest.withdrawal.loading",defaultMessage:"Doing Work..."}))),{INTEREST_UPLOAD_DOCUMENT:A}=c.o4.wx.oP,b=(0,o.connect)((e=>({formValues:c.wl.cr.getFormValues(A)(e)})))((({documentLimits:e,interestUploadDocumentActions:t,submitData:s})=>{const o={documentLimits:e,nextStep:(0,n.useCallback)((()=>t.setStep({step:r.Oq.UPLOADED})),[r.Oq.UPLOADED]),previousStep:(0,n.useCallback)((()=>t.setStep({step:r.Oq.UPLOAD_AND_VERIFIED})),[r.Oq.UPLOAD_AND_VERIFIED]),submitData:s};return n.createElement(a.yT,Object.assign({},o))})),{INTEREST_UPLOAD_DOCUMENT:w}=c.o4.wx.oP,U=(0,o.connect)((e=>({formValues:c.wl.cr.getFormValues(w)(e)})))((({close:e})=>{const t={close:e};return n.createElement(a.gd,Object.assign({},t))}));class g extends n.PureComponent{constructor(e){super(e),this.handleClose=()=>{this.setState({show:!1}),setTimeout((()=>{this.props.close()}),a.x9)},this.handleSubmit=e=>{e.preventDefault(),this.props.interestUploadDocumentActions.saveAdditionalData()},this.submitData=e=>{this.props.interestUploadDocumentActions.uploadFiles({files:e})},this.state={show:!1}}componentDidMount(){this.setState({show:!0}),this.props.interestUploadDocumentActions.fetchEDDDocumentsLimits()}render(){const{data:e}=this.props;return e.cata({Failure:()=>null,Loading:()=>n.createElement(a.ZP,Object.assign({},this.props,{onClose:this.handleClose,isOpen:this.state.show,"data-e2e":"interestUploadDocumentsModal"}),n.createElement(a.FK,null,n.createElement(template_loading,null))),NotAsked:()=>n.createElement(a.ZP,Object.assign({},this.props,{onClose:this.handleClose,isOpen:this.state.show,"data-e2e":"interestUploadDocumentsModal"}),n.createElement(a.FK,null,n.createElement(template_loading,null))),Success:e=>n.createElement(a.ZP,Object.assign({},this.props,{isOpen:this.state.show,onClose:this.handleClose,"data-e2e":"interestUploadDocumentsModal"}),e.step===r.Oq.INIT_PAGE&&n.createElement(a.FK,null,n.createElement(d,Object.assign({handleSubmit:this.handleSubmit},this.props,e))),e.step===r.Oq.GET_STARTED&&n.createElement(a.FK,null,n.createElement(p,Object.assign({},this.props,e))),e.step===r.Oq.UPLOAD_AND_VERIFIED&&n.createElement(a.FK,null,n.createElement(b,Object.assign({},this.props,e,{submitData:this.submitData}))),e.step===r.Oq.UPLOADED&&n.createElement(a.FK,null,n.createElement(U,{close:this.props.close})))})}}const x=(0,o.connect)((e=>({data:getData(e)})),(e=>({interestUploadDocumentActions:(0,l.bindActionCreators)(c.Nw.wx.interestUploadDocument,e)}))),T=(0,l.compose)((0,i.Z)(r.tl.INTEREST_UPLOAD_DOCUMENT_MODAL,{transition:a.x9}),x)(g)}}]);