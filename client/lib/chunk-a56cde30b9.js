"use strict";(self.webpackChunkblockchain_wallet_v4_frontend=self.webpackChunkblockchain_wallet_v4_frontend||[]).push([[8189],{"./src/modals/Btc/VerifyMessage/index.js":(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var r,a,s,o=n("../../node_modules/react/index.js"),i=n("./node_modules/react-intl/lib/src/components/message.js"),l=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("../blockchain-info-components/src/index.js"),u=n("./src/components/Form/index.ts"),f=n("./src/providers/ModalEnhancer/index.tsx"),d=n("./src/services/forms/index.js"),m=n("../../node_modules/bitcoinjs-message/index.js"),p=n.n(m),g=function showResult(e){var t=e.address,n=e.message,r=e.signature;return Boolean(t&&n&&r)};function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y=(0,l.ZP)(u.xJ)(r||(r=_taggedTemplateLiteral(["\n  margin-bottom: 15px;\n"]))),_=l.ZP.div(a||(a=_taggedTemplateLiteral(["\n  margin-bottom: 5px;\n"]))),h=function ItemAddress(e){var t=e.address,n=e.network,r=e.onChange;return o.createElement(y,null,o.createElement(u.lX,null,o.createElement(_,null,o.createElement(i.Z,{id:"modals.verifyMessage.address",defaultMessage:"Bitcoin Address:"})),o.createElement(u.zC,{input:{name:"address",onChange:r},meta:{error:(0,d.kB)(t,null,{network:n}),touched:""!==t},"data-e2e":"bitcoinAddressInput"})))},b=function ItemMessage(e){var t=e.onChange;return o.createElement(y,null,o.createElement(u.lX,null,o.createElement(_,null,o.createElement(i.Z,{id:"modals.verifyMessage.message",defaultMessage:"Message:"})),o.createElement(u.Kx,{input:{name:"message",onChange:t},meta:{},"data-e2e":"messageInput"})))},v=function ItemSignature(e){var t=e.onChange;return o.createElement(y,null,o.createElement(u.lX,null,o.createElement(_,null,o.createElement(i.Z,{id:"modals.verifyMessage.signature",defaultMessage:"Signature:"})),o.createElement(u.Kx,{input:{name:"signature",onChange:t},meta:{},"data-e2e":"signatureInput"})))},E=l.ZP.div(s||(s=_taggedTemplateLiteral(["\n  display: flex;\n  justify-content: center;\n  visibility: ",";\n"])),(function(e){return e.visible?"visible":"hidden"})),P=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(VerifyMessage,e);var t=_createSuper(VerifyMessage);function VerifyMessage(){var e;_classCallCheck(this,VerifyMessage);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"state",{address:"",message:"",signature:""}),_defineProperty(_assertThisInitialized(e),"onChange",(function(t){var n=t.target,r=n.name,a=n.value;e.setState(_defineProperty({},r,a))})),e}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(VerifyMessage,[{key:"render",value:function render(){var e=this.props,t=e.closeAll,n=e.network;return o.createElement(c.u_,null,o.createElement(c.xB,{onClose:t},o.createElement(i.Z,{id:"modals.verifyMessage.title",defaultMessage:"Verify Message"}),o.createElement(c.G0,{id:"verifyMessage"},o.createElement(c.nw,{name:"info"}))),o.createElement(c.fe,null,o.createElement(h,{address:this.state.address,network:n,onChange:this.onChange}),o.createElement(b,{onChange:this.onChange}),o.createElement(v,{onChange:this.onChange}),o.createElement(E,{visible:g(this.state)},function verifySignature(e){var t=e.address,n=e.message,r=e.signature;try{return p().verify(n,t,r)}catch(e){return!1}}(this.state)?o.createElement(c.jL,{type:"success","data-e2e":"validSignatureBadge"},o.createElement(i.Z,{id:"modals.verifyMessage.success",defaultMessage:"The message has a valid signature from the address."})):o.createElement(c.jL,{type:"caution","data-e2e":"incorrectSignatureBadge"},o.createElement(i.Z,{id:"modals.verifyMessage.failure",defaultMessage:"The signature does not match the message."})))),o.createElement(c.mz,{align:"right"},o.createElement(c.zx,{onClick:close,nature:"primary","data-e2e":"closeVerifyMessageButton"},o.createElement(i.Z,{id:"buttons.close",defaultMessage:"Close"}))))}}]),VerifyMessage}(o.PureComponent);const C=(0,f.Z)("VERIFY_MESSAGE_MODAL")(P)}}]);