"use strict";(self.webpackChunkblockchain_wallet_v4_frontend=self.webpackChunkblockchain_wallet_v4_frontend||[]).push([[1903],{"./src/components/Public/index.js":(e,t,s)=>{s.d(t,{i:()=>o});var n,a,r,i=s("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=s("./src/services/styles/index.ts");function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=i.ZP.div(n||(n=_taggedTemplateLiteral(["\n  padding: 32px;\n  border-radius: 8px;\n  box-sizing: border-box;\n  background-color: ",";\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.21);\n  width: 480px;\n\n  ","\n  ","\n"])),(function(e){return e.theme.white}),l.BC.tablet(a||(a=_taggedTemplateLiteral(["\n    width: 100%;\n  "]))),l.BC.mobile(r||(r=_taggedTemplateLiteral(["\n    padding: 20px;\n  "]))))},"./src/scenes/ResetWallet2fa/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var n=s("../../node_modules/react/index.js"),a=s("./node_modules/react-intl/lib/src/components/message.js"),r=s("../../node_modules/react-redux/es/index.js"),i=s("../../node_modules/react-router-bootstrap/lib/index.js"),l=s("../../node_modules/redux/es/redux.js"),o=s("../../node_modules/redux-form/es/Field.js"),c=s("../../node_modules/redux-form/es/reduxForm.js"),m=s("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),d=s("../blockchain-info-components/src/index.js"),u=s("./src/components/Form/index.ts"),p=s("./src/components/Public/index.js"),f=s("./src/data/index.ts"),g=s("./src/services/forms/index.js"),x=s("../../node_modules/console-browserify/index.js");const h=m.ZP.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
`,E=(0,m.ZP)(u.l0)`
  margin-top: 15px;
`,w=(0,m.ZP)(d.xv)`
  margin-top: 5px;
`,b=(0,m.ZP)(u.cw)`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
`,y=(0,m.ZP)(i.Ji)`
  margin-right: 15px;
`,v=m.ZP.div`
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 350px;
`,validNullableEmail=e=>e&&e.length?(0,g.u$)(e):void 0;class Z extends n.PureComponent{constructor(e){super(e),this.initCaptcha=e=>{window.grecaptcha&&window.grecaptcha.enterprise&&window.grecaptcha.enterprise.ready((()=>{window.grecaptcha.enterprise.execute(window.CAPTCHA_KEY,{action:"RESET_2FA"}).then((t=>{x.log("Captcha success"),this.setState({captchaToken:t}),e&&e(t)})).catch((e=>{x.error("Captcha error: ",e)}))}))},this.onSubmit=e=>{if(e.preventDefault(),!this.state.captchaToken)return this.initCaptcha((e=>{this.props.actions.resetWallet2fa(e,this.props.formValues)}));this.props.actions.resetWallet2fa(this.state.captchaToken,this.props.formValues)},this.state={captchaToken:void 0}}componentDidMount(){this.initCaptcha()}componentWillUnmount(){this.props.actions.resetForm()}render(){const{invalid:e,resetWallet2faR:t}=this.props;return n.createElement(p.i,null,n.createElement(h,null,n.createElement(d.xv,{size:"20px",color:"blue900",weight:600,capitalize:!0},n.createElement(a.Z,{id:"scenes.reset2fa.firststep.reset",defaultMessage:"Reset 2FA"}))),t.cata({Failure:e=>n.createElement(n.Fragment,null,n.createElement(d.xv,{size:"14px",style:{margin:"28px 0 16px"},weight:500},n.createElement(a.Z,{id:"scenes.walletguidreminder.error",defaultMessage:"We were unable to process your request at this time. Please try again or contact support if the issue persists."})),e&&n.createElement(d.xv,{color:"red600",size:"14px",style:{margin:"0 0 28px"},weight:500},"Error: ",e),n.createElement(i.Ji,{to:"/login"},n.createElement(d.zx,{"data-e2e":"continueToLogin",nature:"primary",fullwidth:!0},n.createElement(a.Z,{id:"buttons.continue_to_login",defaultMessage:"Continue to Login"})))),Loading:()=>n.createElement(v,null,n.createElement(d.nZ,{width:"40px",height:"40px"})),NotAsked:()=>n.createElement(n.Fragment,null,n.createElement(d.Qt,null,n.createElement(d.xv,{size:"13px",weight:400},n.createElement(a.Z,{id:"scenes.reset2fa.firststep.explain",defaultMessage:"Fill out the form below to regain access to your wallet by resetting your 2FA, restricted IP, and verified email."})),n.createElement(d.xv,{size:"13px",weight:400},n.createElement(a.Z,{id:"scenes.reset2fa.firststep.explain2",defaultMessage:"Note: Your IP address and browser information will be recorded upon submission."}))),n.createElement(E,{onSubmit:this.onSubmit},n.createElement(u.cw,null,n.createElement(u.xJ,null,n.createElement(u.lX,{htmlFor:"guid"},n.createElement(a.Z,{id:"scenes.reset2fa.firststep.firststepform.walletid",defaultMessage:"Wallet ID"})),n.createElement(o.Z,{bgColor:"grey000",autoFocus:!0,component:u.zC,disableSpellcheck:!0,name:"guid",validate:[g.C1,g.Wi]}),n.createElement(d.Qt,{inline:!0},n.createElement(d.xv,{size:"12px",weight:400},n.createElement(a.Z,{id:"scenes.reset2fa.firststep.firststepform.guidexplain",defaultMessage:"If you forgot your wallet identifier, please"})),n.createElement(i.Ji,{to:"/reminder"},n.createElement(d.rU,{size:"12px",weight:500},n.createElement(a.Z,{id:"scenes.reset2fa.firststep.look",defaultMessage:"look it up here."})))))),n.createElement(u.cw,null,n.createElement(u.xJ,null,n.createElement(u.lX,{htmlFor:"email"},n.createElement(a.Z,{id:"scenes.reset2fa.firststep.firststepform.email",defaultMessage:"Registered Email"})),n.createElement(o.Z,{bgColor:"grey000",name:"email",validate:[g.C1,g.u$],component:u.zC}),n.createElement(d.xv,{size:"12px",weight:400},n.createElement(a.Z,{id:"scenes.reset2fa.firststep.firststepform.emailexplain",defaultMessage:"Enter the email associated with your wallet (even if you've lost access to it)."})))),n.createElement(u.cw,null,n.createElement(u.xJ,null,n.createElement(u.lX,{htmlFor:"newEmail"},n.createElement(a.Z,{id:"scenes.reset2fa.firststep.newEmail",defaultMessage:"New Email (Optional)"})),n.createElement(o.Z,{bgColor:"grey000",name:"newEmail",validate:[validNullableEmail],component:u.zC}),n.createElement(w,{size:"12px",weight:400},n.createElement(a.Z,{id:"scenes.reset2fa.firststep.newEmailExplain",defaultMessage:"Enter your updated email if you've lost access to your previously verified email. If your 2FA reset request is approved, this will automatically be set as your wallet's new email address."})))),n.createElement(b,null,n.createElement(y,{to:"/help"},n.createElement(d.zx,{"data-e2e":"reset2faBack",nature:"empty-blue"},n.createElement(a.Z,{id:"buttons.go_back",defaultMessage:"Go Back"}))),n.createElement(d.zx,{"data-e2e":"2faResetContinue",type:"submit",nature:"primary",disabled:e},n.createElement(a.Z,{id:"buttons.continue",defaultMessage:"Continue"}))))),Success:()=>n.createElement(n.Fragment,null,n.createElement(d.Qt,{inline:!0,style:{margin:"32px 0"}},n.createElement(d.xv,{size:"14px",weight:500},n.createElement(a.Z,{id:"scenes.reset2fa.thirdstep.error_info",defaultMessage:"We were unable to process your request at this time. Please try again or contact support if the issue persists."}))),n.createElement(d.Qt,{inline:!0,style:{margin:"32px 0"}},n.createElement(d.xv,{size:"14px",weight:500,color:"red400"},n.createElement(a.Z,{id:"scenes.reset2fa.thirdstep.error",defaultMessage:"Error: Wallet Identifier Not Found"}))),n.createElement(b,null,n.createElement(i.Ji,{to:"/login"},n.createElement(d.zx,{"data-e2e":"reset2faContinue",nature:"primary",fullwidth:!0},n.createElement(a.Z,{id:"buttons.continue_to_login",defaultMessage:"Continue to Login"})))))}))}}const _=(0,l.compose)((0,c.Z)({form:"wallet2faReset"}),(0,r.connect)((e=>({formValues:f.wl.cr.getFormValues("wallet2faReset")(e),resetWallet2faR:f.wl.wx.$5.getFormRequestState(e)})),(e=>({actions:(0,l.bindActionCreators)(f.Nw.wx.resetWallet2fa,e)}))))(Z)}}]);