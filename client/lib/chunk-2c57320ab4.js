"use strict";(self.webpackChunkblockchain_wallet_v4_frontend=self.webpackChunkblockchain_wallet_v4_frontend||[]).push([[9110],{"./src/components/DataError/index.tsx":(e,t,n)=>{n.d(t,{Z:()=>components_DataError});var r,o=n("../../node_modules/react/index.js"),i=n("./node_modules/react-intl/lib/src/components/message.js"),a=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("../blockchain-info-components/src/index.js"),s=n("../../node_modules/ramda/es/prop.js"),l=n("../blockchain-wallet-v4/src/redux/payment/model.js"),d=n("./src/services/misc/index.js"),u=n("./src/modals/components/index.tsx"),m=n("./src/components/Flyout/model.tsx");var p=(0,a.ZP)(c.xv)(r||(r=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  width: 80%;\n  margin-bottom: 20px;\n"])));const f=function ErrorHandler(e){var t=e.message,n=e.onClick,r=e["data-e2e"],a=(0,s.Z)("message",t)||(0,s.Z)("description",t),f=(0,d.K)(t);return f?o.createElement(o.Fragment,null,o.createElement(p,{size:"18px",weight:400},t),o.createElement(c.zx,{nature:"primary",onClick:function onClick(){return n(f)}},o.createElement(c.xv,{size:"18px",weight:400,color:"white"},o.createElement(i.Z,{id:"components.dataerror.archiveaddress",defaultMessage:"Archive Address"})))):a===u.lh?o.createElement(u.wq,null):a===l.B?o.createElement(c.xv,{size:"16px",weight:400},o.createElement(i.Z,{id:"components.dataerror.feesfetchfailure",defaultMessage:"There was a problem fetching fees. Please try again later."})):a===m.k7?o.createElement(c.xv,{size:"16px",weight:400,style:{width:"300px"}},o.createElement(i.Z,{id:"modals.recurringbuys.period_fetch_error",defaultMessage:"There was an error fetching recurring buy frequency options. Please try again."})):"string"==typeof a?o.createElement(c.xv,{size:"16px",color:"error",weight:500},a):o.createElement(c.Qt,{inline:!0},o.createElement(c.xv,{size:"18px",weight:400},o.createElement(i.Z,{id:"components.dataerror.body",defaultMessage:"Please "})),o.createElement(c.rU,{size:"18px","data-e2e":r?"".concat(r,"Link"):"",onClick:n},o.createElement(i.Z,{id:"components.dataerror.click",defaultMessage:"click here"})),o.createElement(c.xv,{size:"18px",weight:400},o.createElement(i.Z,{id:"components.dataerror.refresh",defaultMessage:" to refresh."})))},g=a.ZP.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
`,x=a.ZP.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  margin-top: 20px;
`,y=(0,a.ZP)(c.xv)`
  margin-top: 30px;
  margin-bottom: 20px;
`,components_DataError=e=>o.createElement(g,null,o.createElement(x,null,o.createElement(c.Ee,{name:"empty-search",width:"260px"}),o.createElement(y,{size:"18px",weight:500},o.createElement(i.Z,{id:"components.dataerror.header",defaultMessage:"Oops, something went wrong here!"})),o.createElement(f,Object.assign({},e))))},"./src/modals/Btc/SendBtc/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>ot});var r,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/react-redux/es/index.js"),a=n("../../node_modules/redux/es/redux.js"),c=n("./src/data/index.ts"),s=n("./src/data/types.ts"),l=n("./src/providers/ModalEnhancer/index.tsx"),d=n("./src/components/DataError/index.tsx"),u=n("./node_modules/react-intl/lib/src/components/message.js"),m=n("../../node_modules/bitcoinjs-lib/src/index.js"),p=n("../../node_modules/ramda/es/length.js"),f=n("../../node_modules/ramda/es/isEmpty.js"),g=n("../../node_modules/ramda/es/prop.js"),x=n("../../node_modules/ramda/es/path.js"),y=n("../../node_modules/ramda/es/pathOr.js"),E=(0,n("../blockchain-wallet-v4/src/utils/index.ts").createDeepEqualSelector)([c.wl.wx.Um.getFeePerByteToggled,c.wl.wx.Um.getPayment,c.wl.vE.y0.btc.getActiveHDAccounts,c.wl.vE.y0.btc.getActiveAddresses,c.wl.vE.Nu.T1.getDevices,c.wl.vE.gU.isMnemonicVerified,c.wl.cr.getFormValues(c.o4.wx.Um.Y),c.wl.wx.Um.getSendLimits],(function(e,t,n,r,i,a,c,s){var l=(0,p.Z)(n.getOrElse([])),d=(0,p.Z)(r.getOrElse([])),E=l+d>1||!(0,f.Z)(i.getOrElse([])),h=(0,g.Z)("amount",c),b=(0,g.Z)("feePerByte",c),v=(0,g.Z)("to",c),w=(0,g.Z)("from",c),S=s.getOrElse({});return t.map((function transform(t){var n=(0,x.Z)(["fees","regular"],t),r=(0,x.Z)(["fees","priority"],t),i=(0,x.Z)(["fees","limits","min"],t),c=(0,x.Z)(["fees","limits","max"],t),s=(0,y.Z)("0",["selection","fee"],t),l=(0,g.Z)("effectiveBalance",t),d=[{group:"",items:[{text:o.createElement(u.Z,{id:"modals.sendbtc.firststep.fee.regular",defaultMessage:"Regular"}),value:n},{text:o.createElement(u.Z,{id:"modals.sendbtc.firststep.fee.priority",defaultMessage:"Priority"}),value:r}]}],p=m.QW.bitcoin;return{amount:h,destination:v,effectiveBalance:l,enableToggle:E,excludeLockbox:false,feePerByte:b,feePerByteElements:d,feePerByteToggled:e,from:w,isMnemonicVerified:a,maxFeePerByte:c,minFeePerByte:i,network:p,priorityFeePerByte:r,regularFeePerByte:n,sendLimits:S,totalFee:s}}))})),h=c.wl.vE.y0.btc.getHDAccounts,b=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),v=n("../blockchain-info-components/src/index.js"),w=n("./src/services/styles/index.ts");var S=b.ZP.div(r||(r=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  width: 100%;\n  height: 470px;\n  box-sizing: border-box;\n"])));const template_loading=function(e){return o.createElement(S,null,o.createElement(v.co,{height:"20px",width:"30%"}),o.createElement(v.co,{height:"40px",width:"100%",style:(0,w.W0)("mt-15")}),o.createElement(v.co,{height:"20px",width:"30%",style:(0,w.W0)("mt-30")}),o.createElement(v.co,{height:"40px",width:"100%",style:(0,w.W0)("mt-15")}),o.createElement(v.co,{height:"20px",width:"30%",style:(0,w.W0)("mt-15")}),o.createElement(v.co,{height:"40px",width:"100%",style:(0,w.W0)("mt-15")}),o.createElement(v.co,{height:"80px",width:"100%",style:(0,w.W0)("mt-40")}))};var _=n("../../node_modules/bowser/es5.js"),P=n.n(_),Z=n("../../node_modules/prop-types/index.js"),C=n.n(Z),O=n("../../node_modules/redux-form/es/Field.js"),B=n("../../node_modules/redux-form/es/reduxForm.js"),k=n("./src/components/Display/ComboDisplay/index.js"),T=n("./src/components/Flyout/Banners/UpgradeToGold.tsx"),j=n("./src/components/Form/index.ts"),F=n("./src/components/QRCode/Capture/index.js"),M=n("./src/components/Send/index.tsx"),z=n("./src/components/Send/RecoveryPhrase/index.tsx"),A=n("./src/components/UnstoppableDomains/index.tsx"),L=n("./src/services/forms/index.js"),D=n("./src/modals/Settings/TradingLimits/model.ts"),I=function PriorityFeeLink(e){return o.createElement(v.rU,{size:"12px",weight:400,onClick:e.actions.sendBtcFirstStepPriorityFeeClicked,"data-e2e":"btcPriorityFeeLink"},o.createElement(u.Z,{id:"modals.sendbtc.priorityfeelink.priority",defaultMessage:"Priority: {fee}",values:{fee:e.fee}}))};I.propTypes={fee:C().number.isRequired};const U=(0,i.connect)(void 0,(function mapDispatchToProps(e){return{actions:(0,a.bindActionCreators)(c.Nw.wx.sendBtc,e)}}))(I);var R=function RegularFeeLink(e){return o.createElement(v.rU,{size:"12px",weight:400,onClick:e.actions.sendBtcFirstStepRegularFeeClicked,"data-e2e":"btcRegularFeeLink"},o.createElement(u.Z,{id:"modals.sendbtc.regularfeelink.regular",defaultMessage:"Reg: {fee}, ",values:{fee:e.fee}}))};R.propTypes={fee:C().number.isRequired};const N=(0,i.connect)(void 0,(function mapDispatchToProps(e){return{actions:(0,a.bindActionCreators)(c.Nw.wx.sendBtc,e)}}))(R);var W=n("../blockchain-wallet-v4/src/index.ts"),q=n("../blockchain-wallet-v4/src/exchange/currencies/index.ts"),X=n("../blockchain-wallet-v4/src/exchange/utils.ts"),H=n("./src/modals/components/index.tsx");const Y=(0,i.connect)(void 0,(function mapDispatchToProps(e){return{actions:(0,a.bindActionCreators)(c.Nw.wx.sendBtc,e)}}))((function MaximumAmountLink(e){return o.createElement(v.rU,{size:"12px",weight:400,onClick:e.actions.sendBtcFirstStepMaximumAmountClicked,"data-e2e":"sendBtcUseMaximum"},o.createElement(u.Z,{id:"modals.sendbtc.maximumamountlink.maximum",defaultMessage:"maximum"}))}));const V=(0,i.connect)(void 0,(function mapDispatchToProps(e){return{actions:(0,a.bindActionCreators)(c.Nw.wx.sendBtc,e)}}))((function MaximumFeeLink(e){return o.createElement(v.rU,{size:"12px",weight:400,onClick:e.actions.sendBtcFirstStepMaximumFeeClicked,"data-e2e":"btcMaximumFeeLink"},o.createElement(u.Z,{id:"modals.sendbtc.maximumfeelink.userecupperlimit",defaultMessage:"Use our recommended upper limit."}))}));const J=(0,i.connect)(void 0,(function mapDispatchToProps(e){return{actions:(0,a.bindActionCreators)(c.Nw.wx.sendBtc,e)}}))((function MinimumAmountLink(e){return o.createElement(v.rU,{size:"12px",weight:400,onClick:e.actions.sendBtcFirstStepMinimumAmountClicked,"data-e2e":"btcMinimumAmountLink"},o.createElement(u.Z,{id:"modals.sendbtc.minimumamountlink.minimum",defaultMessage:"minimum"}))}));const K=(0,i.connect)(void 0,(function mapDispatchToProps(e){return{actions:(0,a.bindActionCreators)(c.Nw.wx.sendBtc,e)}}))((function MinimumFeeLink(e){return o.createElement(v.rU,{size:"12px",weight:400,onClick:e.actions.sendBtcFirstStepMinimumFeeClicked,"data-e2e":"btcMinimumFeeLink"},o.createElement(u.Z,{id:"modals.sendbtc.minimumfeelink.minimum",defaultMessage:"minimum"}))}));var G;var Q,$,ee,te,ne,re=b.ZP.div(G||(G=function validationMessages_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n\n  > * {\n    margin: 0 0 0 2px;\n  }\n"]))),oe=function InvalidAmountMessage(){return o.createElement(u.Z,{id:"modals.sendbtc.amountnotzeromessage",defaultMessage:"Invalid amount"})},ie=function MaximumAmountMessage(){return o.createElement(re,{"data-e2e":"sendBtcNotEnoughFunds"},o.createElement(u.Z,{id:"modals.sendbtc.maximumamountmessage",defaultMessage:"Not enough funds. Use"}),o.createElement(Y,null))},ae=function MaximumFeeMessage(){return o.createElement(re,null,o.createElement(u.Z,{id:"modals.sendbtc.maximumfeemessage",defaultMessage:"Unnecessarily high fee."}),o.createElement("span",null," "),o.createElement(V,null))},ce=function MinimumAmountMessage(){return o.createElement(re,null,o.createElement(u.Z,{id:"modals.sendbtc.minimumamountmessage",defaultMessage:"Below minimum amount. Use"}),o.createElement(J,null))},se=function MinimumFeeMessage(){return o.createElement(re,null,o.createElement(u.Z,{id:"modals.sendbtc.minimumfeemessage",defaultMessage:"Low fee not recommended. Use"}),o.createElement(K,null))},le=function MinimumOneSatoshiMessage(){return o.createElement(u.Z,{id:"modals.sendbtc.minimumonesatoshimessage",defaultMessage:"Minimum {sat} required",values:{sat:"1 sat/byte"}})},de=function InsufficientFundsMessage(){return o.createElement(u.Z,{id:"modals.sendbtc.insufficientfundsmessage",defaultMessage:"Insufficient funds"})},ue=function getEffectiveBalance(e){return Number(e.effectiveBalance)},me=function insufficientFunds(e,t,n){var r=ue(n);return r>0&&546<=r?void 0:o.createElement(de,null)},pe=function invalidAmount(e,t,n){var r=(0,g.Z)("coin",e);return W.ei.convertCoinToCoin({baseToStandard:!1,coin:"BTC",value:r})>0?void 0:o.createElement(oe,null)},fe=function minimumAmount(e,t,n){var r=(0,g.Z)("coin",e),i=W.ei.convertCoinToCoin({baseToStandard:!1,coin:"BTC",value:r});return parseInt(i)>=546?void 0:o.createElement(ce,null)},ge=function maximumAmount(e,t,n){var r=ue(n),i=(0,g.Z)("coin",e);return W.ei.convertCoinToCoin({baseToStandard:!1,coin:"BTC",value:i})<=r?void 0:o.createElement(ie,null)},xe=function minimumFeePerByte(e,t,n){return e&&parseInt(e)>=n.minFeePerByte?void 0:o.createElement(se,null)},ye=function minimumOneSatoshi(e,t,n){return e>=1?void 0:o.createElement(le,null)},Ee=function maximumFeePerByte(e,t,n){return e&&parseInt(e)<=n.maxFeePerByte?void 0:o.createElement(ae,null)},he=function isSendLimitOver(e,t,n){var r,i,a,c=n.from,s=n.sendLimits,l=(0,g.Z)("fiat",e);if(c&&"CUSTODIAL"===c.type&&!(0,f.Z)(s)&&null!=s&&null!==(r=s.current)&&void 0!==r&&null!==(i=r.available)&&void 0!==i&&i.currency){var d=null==s||null===(a=s.current)||void 0===a?void 0:a.available,u=d.currency,m=d.value;return l>Number(m)?o.createElement(H.ty,{amount:(0,X.M)(m),currency:q.Z[u].units[u].symbol}):void 0}},be=["handleBitPayInvoiceExpiration","handleFeePerByteToggle","handleSubmit","invalid","pristine","submitting"];function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function template_success_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ve=(0,b.ZP)(v.jL)(Q||(Q=template_success_taggedTemplateLiteral(["\n  margin: -6px 0 12px;\n  padding: 8px;\n"]))),we=(0,b.ZP)(j.cw)($||($=template_success_taggedTemplateLiteral(["\n  margin-top: 16px;\n"]))),Se=b.ZP.div(ee||(ee=template_success_taggedTemplateLiteral(["\n  width: 66%;\n  display: inline-block;\n  float: right;\n"]))),_e=(0,b.ZP)(O.Z)(te||(te=template_success_taggedTemplateLiteral(["\n  & > input {\n    padding-right: 84px;\n  }\n"]))),Pe=b.ZP.div(ne||(ne=template_success_taggedTemplateLiteral(["\n  position: absolute;\n  margin-top: -35px;\n  right: 10px;\n"]))),Ze=function FirstStep(e){var t,n,r=e.handleBitPayInvoiceExpiration,i=e.handleFeePerByteToggle,a=e.handleSubmit,s=e.invalid,l=e.pristine,d=e.submitting,m=_objectWithoutProperties(e,be),p=(m.amount,m.autofilled),g=m.excludeHDWallets,x=m.excludeLockbox,y=m.feePerByte,E=m.feePerByteElements,h=m.feePerByteToggled,b=m.from,w=m.isMnemonicVerified,S=m.payPro,_=m.priorityFeePerByte,Z=m.regularFeePerByte,C=m.sendLimits,B=m.totalFee,I=m.verifyIdentity,R=!!S,W=b&&"LOCKBOX"===b.type,q=b&&"CUSTODIAL"===b.type,X=P().getParser(window.navigator.userAgent).satisfies(c.o4.wx.T1.C),H=W&&!X,Y=q&&!w;return o.createElement(j.l0,{onSubmit:a},o.createElement(j.cw,{inline:!0,margin:"15px",style:{zIndex:3}},o.createElement(j.xJ,{width:"40%"},o.createElement(j.lX,{htmlFor:"coin"},o.createElement(u.Z,{id:"modals.sendbtc.firststep.currency",defaultMessage:"Currency"})),o.createElement(O.Z,{name:"coin",component:j.bX,type:"send",validate:[L.C1]})),o.createElement(j.xJ,{width:"60%"},o.createElement(j.lX,{htmlFor:"from"},o.createElement(u.Z,{id:"copy.from",defaultMessage:"From"})),o.createElement(O.Z,{name:"from",includeAll:!1,validate:[L.C1],component:j.Qb,excludeHDWallets:g,excludeLockbox:x,includeCustodial:!0}))),W&&!H&&o.createElement(ve,{type:"info"},o.createElement(v.xv,{color:"warning",size:"13px"},o.createElement(u.Z,{id:"modals.sendbtc.firststep.lockboxwarn",defaultMessage:"You will need to connect your Lockbox to complete this transaction."}))),H&&o.createElement(ve,{type:"warning"},o.createElement(v.xv,{color:"warning",size:"13px"},o.createElement(u.Z,{id:"modals.sendbtc.firststep.browserwarn",defaultMessage:"Sending Bitcoin from Lockbox can only be done while using the Brave, Chrome, Firefox or Opera browsers."}))),o.createElement(j.cw,null,o.createElement(M.ky,{coin:"BTC",account:b})),o.createElement(j.cw,{margin:q?"15px":"8px"},o.createElement(j.xJ,null,o.createElement(j.lX,{htmlFor:"to"},o.createElement(u.Z,{id:"modals.sendbtc.firststep.towallet",defaultMessage:"To"}),R&&o.createElement(Se,null,o.createElement(j.Fj,{expiryDate:S.expiration,handleExpiry:r,hideTooltip:!0,payProInvoice:!0}))),o.createElement(M.X2,null,R?o.createElement(O.Z,{name:"to",component:j.zC,input:{value:"bitcoin:?r=".concat(S.paymentUrl)},disabled:!0}):o.createElement(o.Fragment,null,o.createElement(O.Z,{component:j.Qb,dataE2e:"sendBtcAddressInput",exclude:b?[b.label]:[],includeAll:!1,includeExchangeAddress:!0,isCreatable:!0,isValidNewOption:function isValidNewOption(){return!1},includeCustodial:!q,forceCustodialFirst:!0,name:"to",noOptionsMessage:function noOptionsMessage(){return null},placeholder:"Paste, scan, or select destination",validate:[L.C1,L.kB]}),o.createElement(F.Z,{scanType:"btcAddress",border:["top","bottom","right","left"]}))))),o.createElement(A.Z,{form:c.o4.wx.Um.Y}),o.createElement(j.cw,{margin:"15px"},o.createElement(j.xJ,null,o.createElement(j.lX,{htmlFor:"amount"},o.createElement(u.Z,{id:"copy.amount",defaultMessage:"Amount"})),o.createElement(O.Z,{name:"amount",component:j.g8,validate:[L.C1,pe,me,fe,ge,he],coin:"BTC","data-e2e":"sendBtc",disabled:R,marginTop:"8px"}))),o.createElement(j.cw,{margin:"15px"},o.createElement(j.xJ,null,o.createElement(j.lX,null,o.createElement(u.Z,{id:"modals.sendbtc.firststep.desc",defaultMessage:"Description"}),o.createElement(v.G0,{id:"sendbtc.firststep.sharetooltip"},o.createElement(v.nw,{name:"info",size:"12px"}))),R?o.createElement(o.Fragment,null,o.createElement(_e,{name:"description",component:j.zC,placeholder:"What's this transaction for? (optional)",rows:3,"data-e2e":"sendBtcDescription",maxLength:100}),o.createElement(Pe,null,o.createElement(v.Ee,{name:"bitpay-logo",height:"24px"}))):o.createElement(O.Z,{name:"description",disabled:q,component:j.or,placeholder:"What's this transaction for? (optional)",rows:3,"data-e2e":"sendBtcDescription",maxLength:100}))),R||q?o.createElement(M.K2,{margin:"10px"},o.createElement(j.lX,null,o.createElement(u.Z,{id:"modals.sendbtc.firststep.networkfee",defaultMessage:"Network Fee"})),o.createElement(k.Z,{size:"13px",weight:600,coin:"BTC"},B)):o.createElement(o.Fragment,null,o.createElement(M.K2,{inline:!0,margin:"10px"},o.createElement(M.Ig,null,o.createElement(M.cY,{toggled:h},o.createElement(M.T7,null,o.createElement(u.Z,{id:"modals.sendbtc.firststep.networkfee",defaultMessage:"Network Fee"}),o.createElement("span",null," "),!h&&o.createElement(O.Z,{name:"feePerByte",component:j.jL,elements:E}),h&&o.createElement(M.ao,null,o.createElement(N,{fee:Z}),o.createElement("span",null," "),o.createElement(U,{fee:_}))),h&&o.createElement(M.Lr,{style:{marginTop:"10px"}},o.createElement(O.Z,{name:"feePerByte",component:j.vb,validate:[L.C1,ye],warn:[xe,Ee],errorBottom:!0,errorLeft:!0,unit:"sat/byte","data-e2e":"sendBtcCustomFeeInput"})))),o.createElement(M.ii,null,o.createElement(k.Z,{size:"13px",weight:600,coin:"BTC"},B),o.createElement(v.rU,{size:"12px",weight:400,capitalize:!0,onClick:i,"data-e2e":"sendBtcCustomFeeLink"},h?o.createElement(u.Z,{id:"buttons.cancel",defaultMessage:"Cancel"}):o.createElement(u.Z,{id:"modals.sendbtc.firststep.customizefee",defaultMessage:"Customize Fee"})))),h&&o.createElement(M.EY,{type:"alert"},o.createElement(v.xv,{size:"12px"},o.createElement(u.Z,{id:"modals.sendbtc.firststep.customfeeinfo",defaultMessage:"This feature is recommended for advanced users only. By choosing a custom fee, you risk overpaying or your transaction never being confirmed."})))),o.createElement(j.cw,{margin:"15px"},y>Z?o.createElement(v.xv,{size:"13px",weight:400,"data-e2e":"btcSendEstTimeMinutes"},o.createElement(u.Z,{defaultMessage:"Estimated confirmation time 0-60 minutes",id:"modals.sendbtc.firststep.estimated2"})):o.createElement(v.xv,{size:"13px",weight:400,"data-e2e":"btcSendEstTimeHourPlus"},o.createElement(u.Z,{id:"modals.sendbtc.firststep.estimated",defaultMessage:"Estimated confirmation time 1+ hour"}))),R&&s&&o.createElement(v.xv,{size:"13px",color:"error",weight:500,style:{textAlign:"center"}},o.createElement(u.Z,{id:"modals.sendbtc.firststep.bitpay.insufficientfunds",defaultMessage:"Insufficient funds to complete BitPay transaction"})),q&&!w?o.createElement(z.Z,null):null,q&&!(0,f.Z)(C)&&(null==C||null===(t=C.globalLimit)||void 0===t||null===(n=t.suggestedUpgrade)||void 0===n?void 0:n.requiredTier)===D.iY.GOLD?o.createElement(T.Z,{limits:C,verifyIdentity:I}):null,o.createElement(we,null,o.createElement(v.zx,{type:"submit",nature:"primary",height:"56px",size:"18px","data-e2e":"sendBtcContinue",disabled:d||s||H||Y||!R&&l&&!p},o.createElement(u.Z,{id:"buttons.continue",defaultMessage:"Continue"}))))};Ze.propTypes={feePerByteElements:C().arrayOf.isRequired,feePerByteToggled:C().bool.isRequired,handleFeePerByteToggle:C().func.isRequired,handleSubmit:C().func.isRequired,invalid:C().bool.isRequired,priorityFeePerByte:C().number.isRequired,regularFeePerByte:C().number.isRequired,submitting:C().bool.isRequired,totalFee:C().string};const Ce=(0,B.Z)({destroyOnUnmount:!1,form:c.o4.wx.Um.Y,shouldError:function shouldError(e){var t=e.initialRender,n=e.nextProps,r=e.props,o=e.structure,i=e.values;return!!t||(t||!o.deepEqual(i,n.values)||r.effectiveBalance!==n.effectiveBalance)},shouldWarn:function shouldWarn(e){var t=e.initialRender,n=e.nextProps,r=e.props,o=e.structure,i=e.values;return!!t||(t||!o.deepEqual(i,n.values)||r.effectiveBalance!==n.effectiveBalance)}})(Ze);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FirstStep,e);var t=_createSuper(FirstStep);function FirstStep(){var e;_classCallCheck(this,FirstStep);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"handleRefresh",(function(){var t=e.props,n=t.amount,r=t.description,o=t.from,i=t.lockboxIndex,a=t.payPro,c=t.to;e.props.actions.initialized({amount:n,description:r,from:o,lockboxIndex:i,payPro:a,to:c})})),e}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(FirstStep,[{key:"render",value:function render(){var e=this,t=this.props,n=t.actions,r=t.amount,i=t.data,a=t.excludeHDWallets,c=t.payPro,s=t.to;return i.cata({Failure:function Failure(t){return o.createElement(d.Z,{onClick:e.handleRefresh,message:t})},Loading:function Loading(){return o.createElement(template_loading,null)},NotAsked:function NotAsked(){return o.createElement(template_loading,null)},Success:function Success(e){return o.createElement(Ce,_extends({},e,{autofilled:!(!r||!s),excludeHDWallets:a,handleBitPayInvoiceExpiration:n.sendBtcBitPayInvoiceExpired,handleFeePerByteToggle:n.sendBtcFirstStepFeePerByteToggled,onSubmit:n.sendBtcFirstStepSubmitClicked,payPro:c}))}})}}]),FirstStep}(o.Component);const Be=(0,i.connect)((function mapStateToProps(e){return{btcData:h(e),data:E(e)}}),(function mapDispatchToProps(e){return{actions:(0,a.bindActionCreators)(c.Nw.wx.sendBtc,e),formActions:(0,a.bindActionCreators)(c.Nw.cr,e),verifyIdentity:function verifyIdentity(){return e(c.Nw.wx.identityVerification.verifyIdentity({needMoreInfo:!1,origin:"Send",tier:2}))}}}))(Oe);var ke=n("../../node_modules/ramda/es/curry.js"),Te=n("../blockchain-wallet-v4/src/redux/payment/btc/utils.ts");const je=c.wl.cr.isSubmitting(c.o4.wx.Um.Y),Fe=(0,ke.Z)(((e,t)=>{const n=e.to[0];switch(n.type){case Te._t.ACCOUNT:return c.wl.vE.gU.getAccountLabel(t)(n.accountIndex);case Te._t.ADDRESS:return c.wl.vE.gU.getLegacyAddressLabel(t)(n.address)||n.address;case Te._t.LOCKBOX:return c.wl.vE.Nu.T1.getLockboxBtcAccount(t,n.xpub).map((0,g.Z)("label")).getOrElse(n.address);default:return n.address}})),Me=(0,ke.Z)(((e,t)=>{switch(e.fromType){case Te._t.ACCOUNT:return c.wl.vE.gU.getAccountLabel(t)(e.fromAccountIdx);case Te._t.CUSTODIAL:return e.from;case Te._t.LEGACY:const n=c.wl.vE.gU.getLegacyAddressLabel(t)(e.from[0]),r=c.wl.cr.getFormValues(c.o4.wx.Um.Y)(t),{from:o}=r;return"allImportedAddresses"===o?"All Imported Bitcoin Addresses":n||e.from[0];case Te._t.LOCKBOX:return c.wl.vE.Nu.T1.getLockboxBtcAccount(t,e.from[0]).map((0,g.Z)("label")).getOrElse(e.from[0]);case Te._t.WATCH_ONLY:case Te._t.EXTERNAL:default:return e.from[0]}})),selectors_getData=e=>c.wl.wx.Um.getPayment(e).map((t=>{const n=Me(t,e),r=Fe(t,e);return{amount:t.amount[0],description:t.description,fee:t.selection?t.selection.fee:0,fromAddress:n,fromType:t.type,submitting:je(e),toAddress:r,total:t.selection?t.selection.fee+t.amount[0]:t.amount[0]}}));var ze;var Ae=b.ZP.div(ze||(ze=function template_error_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n  box-sizing: border-box;\n"])));const template_error=function(e){return o.createElement(Ae,null,o.createElement(v.xv,{size:"12px",weight:400,color:"red600"},e.children))};var Le;var De=b.ZP.div(Le||(Le=function template_loading_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  width: 100%;\n  height: 470px;\n  box-sizing: border-box;\n"])));const SecondStep_template_loading=function(e){return o.createElement(De,null,o.createElement(v.co,{height:"20px",width:"30%"}),o.createElement(v.co,{height:"40px",width:"100%",style:{"margin-top":"15px"}}),o.createElement(v.co,{height:"20px",width:"30%",style:{"margin-top":"30px"}}),o.createElement(v.co,{height:"40px",width:"100%",style:{"margin-top":"15px"}}),o.createElement(v.co,{height:"20px",width:"30%",style:{"margin-top":"15px"}}),o.createElement(v.co,{height:"40px",width:"100%",style:{"margin-top":"15px"}}),o.createElement(v.co,{height:"80px",width:"100%",style:{"margin-top":"40px"}}))};var Ie,Ue,Re,Ne,We,qe=n("./src/components/Display/CoinDisplay/index.tsx"),Xe=n("./src/components/Display/FiatDisplay/index.tsx"),He=n("./src/components/Exchange/index.tsx");function SecondStep_template_success_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ye=(0,b.ZP)(He.im)(Ie||(Ie=SecondStep_template_success_taggedTemplateLiteral(["\n  padding: 0;\n"]))),Ve=(0,b.ZP)(He.bp)(Ue||(Ue=SecondStep_template_success_taggedTemplateLiteral(["\n  justify-content: flex-end;\n"]))),Je=(0,b.ZP)(He.lb)(Re||(Re=SecondStep_template_success_taggedTemplateLiteral(["\n  justify-content: flex-end;\n"]))),Ke=(0,b.ZP)(v.xv)(Ne||(Ne=SecondStep_template_success_taggedTemplateLiteral(["\n  max-width: 60%;\n  text-align: right;\n  word-break: break-all;\n"]))),Ge=b.ZP.div(We||(We=SecondStep_template_success_taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  margin-top: 16px;\n  width: 100%;\n\n  & > :first-child {\n    margin-bottom: 15px;\n  }\n"])));const Qe=function Success(e){var t=e.amount,n=e.coin,r=e.description,i=e.fee,a=e.fromAddress,c=e.handleBack,s=e.handleBitPayInvoiceExpiration,l=e.handleSubmit,d=e.payPro,m=e.submitting,p=e.toAddress,f=e.total;return o.createElement(o.Fragment,null,d&&o.createElement(j.Fj,{expiryDate:d.expiration,handleExpiry:s,hideTooltip:!0,payProInvoice:!0}),o.createElement(Ye,null,o.createElement(He.xy,null,o.createElement(v.xv,{size:"16px",weight:500},o.createElement(u.Z,{id:"copy.from",defaultMessage:"From"}),":"),o.createElement(v.xv,{size:"16px",weight:400,"data-e2e":"btcFromWallet"},a)),o.createElement(He.xy,null,o.createElement(v.xv,{size:"16px",weight:500},o.createElement(u.Z,{id:"modals.sendbtc.secondstep.to",defaultMessage:"To:"})),o.createElement(Ke,{size:"16px",weight:400,"data-e2e":"btcToAddress"},d?"BitPay[".concat(d.merchant,"]"):p)),r&&o.createElement(He.xy,null,o.createElement(v.xv,{size:"16px",weight:500},o.createElement(u.Z,{id:"modals.sendbtc.secondstep.note",defaultMessage:"Note:"})),o.createElement(v.xv,{size:"16px",weight:400,"data-e2e":"btcSendDescription"},r)),o.createElement(He.xy,null,o.createElement(v.xv,{size:"16px",weight:500},o.createElement(u.Z,{id:"copy.amount",defaultMessage:"Amount"}),":"),o.createElement(He.UO,null,o.createElement(Ve,null,o.createElement(Xe.Z,{size:"16px",weight:500,coin:n},t)),o.createElement(Je,null,o.createElement(qe.Z,{size:"14px",weight:300,coin:n},t)))),o.createElement(He.xy,null,o.createElement(v.xv,{size:"16px",weight:500},o.createElement(u.Z,{id:"modals.sendbtc.secondstep.fee",defaultMessage:"Fee:"})),o.createElement(He.UO,null,o.createElement(Ve,null,o.createElement(Xe.Z,{size:"16px",weight:500,coin:n},i)),o.createElement(Je,null,o.createElement(qe.Z,{size:"14px",weight:300,coin:n},i)))),o.createElement(He.xy,null,o.createElement(v.xv,{size:"16px",weight:500},o.createElement(u.Z,{id:"modals.sendbtc.secontstep.sendtotal",defaultMessage:"Total:"})),o.createElement(He.UO,null,o.createElement(Ve,{"data-e2e":"".concat(n,"SendTotal")},o.createElement(Xe.Z,{coin:n,size:"16px",weight:500},f)),o.createElement(Je,{"data-e2e":"".concat(n,"SendSubTotal")},o.createElement(qe.Z,{coin:n,size:"14px",weight:300},f))))),o.createElement(Ge,null,o.createElement(v.zx,{height:"56px",size:"18px",onClick:l,disabled:m,nature:"primary",fullwidth:!0,"data-e2e":"btcSendSubmitButton"},m?o.createElement(v.JA,{height:"20px",width:"20px",color:"white"}):o.createElement(u.Z,{id:"modals.sendbtc.secondstep.send",defaultMessage:"Send Bitcoin"})),o.createElement(v.rU,{onClick:!m&&c,disabled:m,size:"13px",weight:400,"data-e2e":"btcSendBackLink"},o.createElement(u.Z,{id:"buttons.go_back",defaultMessage:"Go Back"}))))};function SecondStep_typeof(e){return SecondStep_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SecondStep_typeof(e)}function SecondStep_extends(){return SecondStep_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SecondStep_extends.apply(this,arguments)}function SecondStep_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SecondStep_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SecondStep_setPrototypeOf(e,t){return SecondStep_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},SecondStep_setPrototypeOf(e,t)}function SecondStep_createSuper(e){var t=function SecondStep_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=SecondStep_getPrototypeOf(e);if(t){var o=SecondStep_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return SecondStep_possibleConstructorReturn(this,n)}}function SecondStep_possibleConstructorReturn(e,t){if(t&&("object"===SecondStep_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function SecondStep_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function SecondStep_getPrototypeOf(e){return SecondStep_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},SecondStep_getPrototypeOf(e)}var $e=function(e){!function SecondStep_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SecondStep_setPrototypeOf(e,t)}(SecondStepContainer,e);var t=SecondStep_createSuper(SecondStepContainer);function SecondStepContainer(){return SecondStep_classCallCheck(this,SecondStepContainer),t.apply(this,arguments)}return function SecondStep_createClass(e,t,n){return t&&SecondStep_defineProperties(e.prototype,t),n&&SecondStep_defineProperties(e,n),e}(SecondStepContainer,[{key:"render",value:function render(){var e=this.props,t=e.actions,n=e.data,r=e.payPro;return n.cata({Failure:function Failure(e){return o.createElement(template_error,null,e)},Loading:function Loading(){return o.createElement(SecondStep_template_loading,null)},NotAsked:function NotAsked(){return o.createElement(SecondStep_template_loading,null)},Success:function Success(e){return o.createElement(Qe,SecondStep_extends({},e,{payPro:r,coin:"BTC",handleSubmit:t.sendBtcSecondStepSubmitClicked,handleBack:t.sendBtcSecondStepCancelClicked,handleBitPayInvoiceExpiration:t.sendBtcBitPayInvoiceExpired}))}})}}]),SecondStepContainer}(o.PureComponent);const et=(0,i.connect)((function mapStateToProps(e){return{data:selectors_getData(e)}}),(function mapDispatchToProps(e){return{actions:(0,a.bindActionCreators)(c.Nw.wx.sendBtc,e)}}))($e);var tt=n("./src/components/Announcements/index.js");const nt=(0,b.ZP)(v.xB)`
  border-bottom: 0;
  padding-bottom: 8px;
  > div:first-child * {
    color: ${e=>e.theme.blue900};
  }
`,template=e=>o.createElement(v.u_,{size:"medium",position:e.position,total:e.total},o.createElement(nt,{icon:"send",onClose:e.closeAll},o.createElement(u.Z,{id:"modals.sendbitcoin.title",defaultMessage:"Send Bitcoin"})),o.createElement(tt.Z,{type:"service",alertArea:"send",currentCoin:"BTC"}),o.createElement(v.fe,null,e.children));class rt extends o.PureComponent{componentDidMount(){const{amount:e,description:t,from:n,lockboxIndex:r,payPro:o,to:i}=this.props;this.props.actions.initialized({amount:e,description:t,from:n,lockboxIndex:r,payPro:o,to:i})}componentWillUnmount(){this.props.actions.destroyed()}render(){const{amount:e,closeAll:t,description:n,excludeHDWallets:r,payPro:i,position:a,step:c,to:s,total:l}=this.props;return o.createElement(template,{position:a,total:l,closeAll:t},1===c&&o.createElement(Be,{to:s,amount:e,description:n,excludeHDWallets:r,payPro:i}),2===c&&o.createElement(et,{payPro:i}))}}const ot=(0,a.compose)((0,l.Z)(s.tl.SEND_BTC_MODAL),(0,i.connect)((e=>({step:c.wl.wx.Um.getStep(e)})),(e=>({actions:(0,a.bindActionCreators)(c.Nw.wx.sendBtc,e)}))))(rt)}}]);