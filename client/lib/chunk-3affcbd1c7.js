"use strict";(self.webpackChunkblockchain_wallet_v4_frontend=self.webpackChunkblockchain_wallet_v4_frontend||[]).push([[4656],{"./src/components/QRCode/Capture/index.js":(e,t,r)=>{r.d(t,{Z:()=>R});var n,o,i=r("../../node_modules/react/index.js"),s=r("../../node_modules/react-redux/es/index.js"),a=r("../../node_modules/bip21/index.js"),c=r.n(a),d=r("../../node_modules/prop-types/index.js"),l=r.n(d),p=r("../../node_modules/ramda/es/isNil.js"),u=r("../../node_modules/ramda/es/isEmpty.js"),f=r("../../node_modules/ramda/es/replace.js"),m=r("../../node_modules/ramda/es/toUpper.js"),h=r("../../node_modules/ramda/es/includes.js"),y=r("../../node_modules/ramda/es/prop.js"),b=r("../../node_modules/redux/es/redux.js"),g=r("../blockchain-wallet-v4/src/index.ts"),_=r("./src/data/index.ts"),v=r("./src/services/alerts/index.ts"),x=r("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),P=r("../blockchain-info-components/src/index.js"),w=r("./src/components/QRCode/Reader/index.tsx");function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var E=x.ZP.div(n||(n=_taggedTemplateLiteral(["\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  min-width: 48px;\n  width: 48px;\n  height: 48px;\n  cursor: pointer;\n  box-sizing: border-box;\n  border-radius: 8px;\n  border-top: ",";\n  border-right: ",";\n  border-bottom: ",";\n  border-left: ",";\n"])),(function(e){return e.border.indexOf("top")>-1&&"1px solid ".concat(e.theme.grey100)}),(function(e){return e.border.indexOf("right")>-1&&"1px solid ".concat(e.theme.grey100)}),(function(e){return e.border.indexOf("bottom")>-1&&"1px solid ".concat(e.theme.grey100)}),(function(e){return e.border.indexOf("left")>-1&&"1px solid ".concat(e.theme.grey100)})),A=x.ZP.div(o||(o=_taggedTemplateLiteral(["\n  position: absolute;\n  bottom: 50px;\n  left: -180px;\n  width: 230px;\n  display: block;\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 0px;\n  padding: 5px;\n  box-sizing: border-box;\n  z-index: 4;\n\n  & > section > video,\n  canvas {\n    width: 100%;\n  }\n\n  &:before {\n    content: '';\n    display: block;\n    position: absolute;\n    left: 185px;\n    top: 100%;\n    width: 0;\n    height: 0;\n    border: 10px solid transparent;\n    border-top-color: ",";\n  }\n\n  &:after {\n    content: '';\n    display: block;\n    position: absolute;\n    left: 186px;\n    top: 100%;\n    width: 0;\n    height: 0;\n    border: 9px solid transparent;\n    border-top-color: ",";\n  }\n"])),(function(e){return e.theme.grey000}),(function(e){return e.theme.grey100}),(function(e){return e.theme.grey100}),(function(e){return e.theme.grey000})),O=function QRCodeCapture(e){var t=e.border,r=e.handleError,n=e.handleScan,o=e.handleToggle,s=e.toggled;return i.createElement(E,{border:t,onClick:o},!s&&i.createElement(P.JO,{name:"qr-code",color:"grey500",width:"20px",height:"20px"}),s&&i.createElement(P.JA,{width:"24px",height:"24px",color:"success",onClick:o}),s&&i.createElement(A,null,i.createElement(w.Z,{onScan:n,onError:r})))};O.propTypes={handleError:l().func.isRequired,handleScan:l().func.isRequired,handleToggle:l().func.isRequired,toggled:l().bool.isRequired};const C=O;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=_.o4.wx.Um.Y,j=_.o4.wx.Xt.Y,T=_.o4.wx.Em.Y,B=_.o4.wx.tF.FORM,k=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(QRCodeCaptureContainer,e);var t=_createSuper(QRCodeCaptureContainer);function QRCodeCaptureContainer(e){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,QRCodeCaptureContainer),_defineProperty(_assertThisInitialized(r=t.call(this,e)),"handleToggle",(function(){r.setState((function(e){return{toggled:!e.toggled}}))})),_defineProperty(_assertThisInitialized(r),"handleScan",(function(e){if(!(0,p.Z)(e)&&!(0,u.Z)(e)){try{var t=r.getScanHandlerKey();r[t](e)}catch(t){r.props.onScan(e)}r.setState({toggled:!1})}})),_defineProperty(_assertThisInitialized(r),"handleError",(function(e){(0,p.Z)(e)||(0,u.Z)(e)||("NotAllowedError"===e.name?r.props.alertActions.displayError(v.Zd):r.props.alertActions.displayError(e.message))})),_defineProperty(_assertThisInitialized(r),"createNewValue",(function(e){return{value:{label:e,value:e}}})),_defineProperty(_assertThisInitialized(r),"getScanHandlerKey",(function(){return"handleScan".concat((0,f.Z)(/^./,m.Z,r.props.scanType))})),_defineProperty(_assertThisInitialized(r),"getAddressOrBitPayInvoice",(function(e,t){var r,n,o=(0,h.Z)("".concat(e,":?r=https://bitpay.com/"),t);if(o)r=t;else try{var i=c().decode(t,e);r=(0,y.Z)("address",i),n=(0,y.Z)("options",i)}catch(e){throw Error("invalid_bip21")}return{address:r,isBitPay:o,options:n}})),r.state={toggled:!1},r}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(QRCodeCaptureContainer,[{key:"handleScanBtcAddress",value:function handleScanBtcAddress(e){var t;try{t=this.getAddressOrBitPayInvoice("bitcoin",e);var r=this.props,n=r.btcRatesR,o=r.currency,i=n.getOrElse({price:0}),s=t.options,a=s.amount,c=s.message,d=g.ei.convertCoinToFiat({coin:"BTC",currency:o,isStandard:!0,rates:i,value:a});this.props.formActions.change(S,"to",this.createNewValue(t.address)),this.props.formActions.change(S,"description",c),this.props.formActions.change(S,"amount",{coin:a,fiat:d})}catch(r){try{if(g.P6.btc.isValidBtcAddress(e,this.props.network)||t.isBitPay)return void this.props.formActions.change(S,"to",this.createNewValue(e));throw Error("invalid_btc_addr")}catch(e){this.props.alertActions.displayError(v.SI)}}}},{key:"handleScanBchAddress",value:function handleScanBchAddress(e){var t;try{var r=(t=this.getAddressOrBitPayInvoice("bitcoincash",e)).options,n=r.amount,o=r.message;this.props.formActions.change(j,"to",this.createNewValue(t.address)),this.props.formActions.change(j,"amount",n),this.props.formActions.change(j,"description",o),this.setState({bchAddressToggled:!1})}catch(r){try{if(g.P6.bch.isCashAddr(e))return void this.props.formActions.change(j,"to",this.createNewValue(e));if(g.P6.btc.isValidBtcAddress(e,this.props.network)||t.isBitPay)return void this.props.formActions.change(j,"to",this.createNewValue(e));throw Error("invalid_bch_addr")}catch(e){this.props.alertActions.displayError(v.OQ)}}}},{key:"handleScanEthAddress",value:function handleScanEthAddress(e){var t=g.P6.eth.sanitazeEth(e);g.P6.eth.isValidAddress(t)?this.props.formActions.change(T,"to",this.createNewValue(t)):this.props.alertActions.displayError(v.pz)}},{key:"handleScanXlmAddress",value:function handleScanXlmAddress(e){var t=g.P6.xlm.decodeXlmURI(e).address;g.P6.xlm.isValidAddress(t)?this.props.formActions.change(B,"to",this.createNewValue(t)):this.props.alertActions.displayError(v.ok)}},{key:"handleScanBtcPriv",value:function handleScanBtcPriv(e){g.P6.btc.isValidBtcPrivateKey(e,this.props.network)?(this.props.formActions.change(this.props.form||S,"priv",e),this.props.formActions.touch(this.props.form||S,"priv")):this.props.alertActions.displayError(v.X1)}},{key:"handleScanBtcPrivOrAddress",value:function handleScanBtcPrivOrAddress(e){try{var t=c().decode(e).address;g.P6.btc.isValidBtcAddress(t,this.props.network)?(this.props.formActions.change(this.props.form||"importBtcAddress","addrOrPriv",t),this.props.formActions.touch(this.props.form||"importBtcAddress","addrOrPriv")):this.props.alertActions.displayError(v.Z1)}catch(t){g.P6.btc.isValidBtcPrivateKey(e,this.props.network)||g.P6.btc.isValidBtcAddress(e,this.props.network)?(this.props.formActions.change(this.props.form||"importBtcAddress","addrOrPriv",e),this.props.formActions.touch(this.props.form||"importBtcAddress","addrOrPriv")):this.props.alertActions.displayError(v.Z1)}}},{key:"render",value:function render(){var e=this.props.border,t=this.state.toggled;return i.createElement(C,{border:e,toggled:t,handleToggle:this.handleToggle,handleScan:this.handleScan,handleError:this.handleError})}}]),QRCodeCaptureContainer}(i.PureComponent);k.defaultProps={scanType:l().oneOf(["btcAddress","ethAddress","bchAddress","xlmAddress","btcPriv","btcPrivOrAddress"])};const R=(0,s.connect)((function mapStateToProps(e){return{btcRatesR:_.wl.vE.aT.coins.getRates("BTC",e),currency:_.wl.vE.Xd.getCurrency(e).getOrElse("USD")}}),(function mapDispatchToProps(e){return{alertActions:(0,b.bindActionCreators)(_.Nw.$u,e),formActions:(0,b.bindActionCreators)(_.Nw.cr,e),modalActions:(0,b.bindActionCreators)(_.Nw.qk,e)}}))(k)},"./src/modals/Btc/ImportBtcAddress/index.js":(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r("../../node_modules/react/index.js"),o=r("../../node_modules/react-redux/es/index.js"),i=r("../../node_modules/redux/es/redux.js"),s=r("../blockchain-wallet-v4/src/index.ts"),a=r("./src/data/index.ts"),c=r("./src/providers/ModalEnhancer/index.tsx"),d=r("../../node_modules/bitcoinjs-lib/src/index.js"),l=r("../../node_modules/redux-form/es/formValueSelector.js"),p=function getData(e){var t=(0,l.Z)("importBtcAddress")(e,"addrOrPriv");return{network:d.QW.bitcoin,priv:t}};var u,f,m,h,y,b,g,_,v,x=r("./node_modules/react-intl/lib/src/components/message.js"),P=r("../../node_modules/redux-form/es/Field.js"),w=r("../../node_modules/redux-form/es/reduxForm.js"),E=r("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),A=r("../blockchain-info-components/src/index.js"),O=r("./src/components/Form/index.ts"),C=r("./src/components/QRCode/Capture/index.js"),S=r("./src/services/forms/index.js"),j=r("./src/services/forms/normalizers.js"),T=r("./src/services/styles/index.ts");function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var B=E.ZP.div(u||(u=_taggedTemplateLiteral(["\n  font-weight: 400;\n  color: ",";\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu,\n    Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n"])),(function(e){return e.theme.grey700})),k=E.ZP.div(f||(f=_taggedTemplateLiteral(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n"]))),R=(0,E.ZP)(A.xv)(m||(m=_taggedTemplateLiteral(["\n  margin-bottom: 9px;\n"]))),Z=(0,E.ZP)(O.xJ)(h||(h=_taggedTemplateLiteral(["\n  margin-bottom: 32px;\n"]))),I=(0,E.ZP)(k)(y||(y=_taggedTemplateLiteral(["\n  input {\n    border-radius: 8px 0 0 8px;\n  }\n\n  > div {\n    border-radius: 0 8px 8px 0;\n  }\n"]))),z=(0,E.ZP)(A.G0)(b||(b=_taggedTemplateLiteral(["\n  & > span {\n    font-size: 12px;\n  }\n"]))),V=E.ZP.label(g||(g=_taggedTemplateLiteral(["\n  display: flex;\n"]))),N=(0,E.ZP)(A.xB)(_||(_=_taggedTemplateLiteral(["\n  border-bottom: 0;\n  padding-bottom: 8px;\n\n  > div:first-child * {\n    font-weight: 500;\n    color: ",";\n  }\n"])),(function(e){return e.theme.grey800})),L=(0,E.ZP)(A.mz)(v||(v=_taggedTemplateLiteral(["\n  border-top: 0;\n"])));const Q=(0,w.Z)({form:"importBtcAddress",initialValues:{"address-type":""}})((function ImportBtcAddress(e){var t=e.handleSubmit,r=e.invalid,o=e.onClose,i=e.position,s=e.priv,a=e.submitting;return n.createElement(A.u_,{size:"large",position:i},n.createElement(O.l0,{onSubmit:t},n.createElement(B,null,n.createElement(N,{onClose:o},n.createElement(x.Z,{id:"modals.importkey.import",defaultMessage:"Import Private Key"})),n.createElement(A.fe,null,n.createElement(O.cw,null,n.createElement(Z,{width:"100%"},n.createElement(V,{htmlFor:"addrOrPriv"},n.createElement(R,{color:"grey600",size:"14px",weight:500},n.createElement(x.Z,{id:"modals.importkey.label.privatekey",defaultMessage:"Enter your private key"})),n.createElement(z,{id:"import.privatekeys","data-place":"right",style:{marginTop:"3px"}},n.createElement(A.nw,{name:"info"}))),n.createElement(I,null,n.createElement(P.Z,{name:"addrOrPriv",validate:[S.e3,S.C1],normalize:j.sd,component:O.zC,"data-e2e":"privateKeyInput"}),n.createElement(C.Z,{scanType:"btcPrivOrAddress",border:["top","bottom","right"]}))),n.createElement(Z,{width:"100%"},n.createElement(V,{htmlFor:"addrOrPriv"},n.createElement(R,{color:"grey600",size:"14px",weight:500},n.createElement(x.Z,{id:"modals.importkey.label.enterlabel",defaultMessage:"Enter a label (optional)"}))),n.createElement(k,null,n.createElement(P.Z,{name:"label",validate:[],component:O.zC,"data-e2e":"labelInput"}))),n.createElement(Z,{style:(0,T.W0)("mt-10")},n.createElement(V,{htmlFor:"wallets"},n.createElement(R,{color:"grey600",size:"14px",weight:500},n.createElement(x.Z,{id:"modals.importkey.label.transferfunds",defaultMessage:"Transfer funds to an existing wallet (optional)"}))),n.createElement(k,null,n.createElement(P.Z,{name:"to",component:O.Qb,optional:!0,excludeImported:!0,includeAll:!1,disabled:!s}))))),n.createElement(L,{align:"right"},n.createElement(A.zx,{type:"submit",nature:"primary",capitalize:!0,disabled:a||r,"data-e2e":"importButton"},n.createElement(x.Z,{id:"modals.importkey.import",defaultMessage:"Import Private Key"}))))))}));function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ImportBtcAddressContainer,e);var t=_createSuper(ImportBtcAddressContainer);function ImportBtcAddressContainer(){var e;_classCallCheck(this,ImportBtcAddressContainer);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(n))),"handleSubmit",(function(){e.props.importBtcAddress()})),e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(ImportBtcAddressContainer,[{key:"render",value:function render(){var e=this.props,t=e.closeAll,r=e.invalid,o=e.network,i=e.position,a=e.priv,c=e.submitting;return n.createElement(Q,{invalid:r,onClose:t,onSubmit:this.handleSubmit,position:i,priv:s.P6.btc.isValidBtcPrivateKey(a,o),submitting:c})}}]),ImportBtcAddressContainer}(n.PureComponent),F=p;const D=(0,i.compose)((0,c.Z)("IMPORT_BTC_ADDRESS_MODAL"),(0,o.connect)(F,(function mapDispatchToProps(e){return{importBtcAddress:function importBtcAddress(){return e(a.Nw.wx.importBtcAddress.importBtcAddressSubmitClicked())}}})))(M)},"./src/components/QRCode/Reader/index.tsx":(e,t,r)=>{r.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var n=r("../../node_modules/react/index.js"),o=r("./node_modules/react-intl/lib/src/components/message.js"),i=r("../../node_modules/react-qr-reader/lib/index.js"),s=r.n(i),a=r("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=r("../blockchain-info-components/src/index.js"),d=r("./src/utils/helpers.ts");const l=a.ZP.div`
  > section > section > div {
    border: 30px solid rgba(0, 0, 0, 0.3) !important;
    box-shadow: rgba(255, 255, 255, 0.5) 0px 0px 0px 4px inset !important;
  }
`,p=a.ZP.div`
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0.5;
  padding: 20px;
  margin: 20px;
`,__WEBPACK_DEFAULT_EXPORT__=e=>{const{onError:t,onScan:r}=e,[i,a]=(0,n.useState)(!1),[u,f]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{(0,d.Yf)().then((e=>{a(e),f(!1)}))}),[]),u?n.createElement(p,null,n.createElement(c.T_,{width:"80px",height:"80px"})):i?n.createElement(l,null,n.createElement(s(),{onScan:r,onError:t})):n.createElement(c.jL,{type:"warning"},n.createElement(o.Z,{id:"components.qrreader.warning",defaultMessage:"Your browser does not have webcam support."}))}}}]);